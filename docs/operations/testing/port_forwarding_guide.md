# ν¬νΈν¬μ›λ”© ν™κ²½ μ ‘μ† κ°€μ΄λ“

μ΄ λ¬Έμ„λ” SSH ν¬νΈν¬μ›λ”©μ„ ν†µν•΄ μ›κ²© μ„λ²„μ λ€μ‹λ³΄λ“μ— μ ‘μ†ν•λ” λ°©λ²•μ„ μ„¤λ…ν•©λ‹λ‹¤.

## β… ν¬νΈν¬μ›λ”© μ„¤μ • (ν•„μ)

### 1. SSH ν„°λ„ μƒμ„±
λ΅μ»¬ PCμ—μ„ λ‹¤μ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•μ—¬ ν¬νΈν¬μ›λ”©μ„ μ„¤μ •ν•©λ‹λ‹¤:

```bash
ssh -L 5173:localhost:5173 -L 8000:localhost:8000 ubuntu@[μ„λ²„IP]
```

**μ¤‘μ”**: λ‘ ν¬νΈ(5173, 8000)λ¥Ό λ¨λ‘ ν¬μ›λ”©ν•΄μ•Ό ν•©λ‹λ‹¤!
- `5173`: λ€μ‹λ³΄λ“ UI (Vite Dev Server)
- `8000`: API μ„λ²„ (FastAPI + WebSocket)

### 2. λΈλΌμ°μ € μ ‘μ†
SSH ν„°λ„μ΄ μ—°κ²°λ μƒνƒμ—μ„ λ΅μ»¬ λΈλΌμ°μ €μ—μ„ μ ‘μ†:

```
http://localhost:5173
```

### 3. μ—°κ²° ν™•μΈ
- λΈλΌμ°μ € κ°λ°μ λ„κµ¬(F12) β†’ μ½μ†” ν™•μΈ
- `π”§ API Configuration` λ΅κ·Έμ— λ‹¤μκ³Ό κ°™μ΄ ν‘μ‹λμ–΄μ•Ό ν•¨:
  ```
  API_HOST: "localhost"
  API_PORT: "8000"
  API_SERVER: "http://localhost:8000"
  WS_SERVER: "ws://localhost:8000/ws"
  ```

## π”§ νΈλ¬λΈ”μν…

### "Failed to fetch" λλ” "WebSocket connection failed" μ¤λ¥
**μ›μΈ**: 8000 ν¬νΈκ°€ ν¬μ›λ”©λμ§€ μ•μ•κ±°λ‚ API μ„λ²„κ°€ κ°€λ™ μ¤‘μ΄ μ•„λ‹

**ν•΄κ²°**:
1. SSH ν„°λ„μ— `-L 8000:localhost:8000` μµμ…μ΄ ν¬ν•¨λμ–΄ μλ”μ§€ ν™•μΈ
2. μ„λ²„μ—μ„ API μ„λ²„ μƒνƒ ν™•μΈ:
   ```bash
   docker ps | grep api-server
   curl http://localhost:8000/health
   ```

### μ°¨νΈκ°€ ν‘μ‹λμ§€ μ•μ
**μ›μΈ**: μ‹¤μ‹κ°„ λ°μ΄ν„° μμ§‘κΈ°κ°€ κ°€λ™ μ¤‘μ΄ μ•„λ‹κ±°λ‚ DBμ— λ°μ΄ν„°κ°€ μ—†μ

**ν•΄κ²°**:
```bash
# μ„λ²„μ—μ„ μ‹¤ν–‰
docker ps | grep -E "real-collector|asp-collector"
docker exec stock-timescale psql -U postgres -d stockval -c "SELECT COUNT(*) FROM market_ticks;"
```

### WebSocket μƒνƒκ°€ κ³„μ† "CONNECTING"
**μ›μΈ**: μ›Ήμ†μΌ“ μ—°κ²° μ‹¤ν¨

**ν•΄κ²°**:
1. λΈλΌμ°μ € κ°λ°μ λ„κµ¬ β†’ Network β†’ WS νƒ­ ν™•μΈ
2. `ws://localhost:8000/ws` μ—°κ²°μ΄ 101 μƒνƒλ΅ μ„±κ³µν–λ”μ§€ ν™•μΈ
3. μ„λ²„ λ΅κ·Έ ν™•μΈ:
   ```bash
   docker logs api-server --tail 50
   ```

## π“‹ ν¬νΈν¬μ›λ”© vs μ§μ ‘ μ ‘μ† λΉ„κµ

| ν•­λ© | ν¬νΈν¬μ›λ”© (SSH ν„°λ„) | μ§μ ‘ μ ‘μ† |
|------|---------------------|----------|
| μ ‘μ† URL | `http://localhost:5173` | `http://μ„λ²„IP:5173` |
| API νΈμ¤νΈ | `localhost` | `μ„λ²„IP` |
| λ³΄μ• | SSH μ•”νΈν™” (κ¶μ¥) | λ°©ν™”λ²½ μ„¤μ • ν•„μ” |
| μ„¤μ • | SSH ν„°λ„ μƒμ„± ν•„μ” | λ°©ν™”λ²½ ν¬νΈ κ°λ°© ν•„μ” |

## π― κ¶μ¥ λ°©λ²•

**κ°λ°/λ””λ²„κΉ…**: ν¬νΈν¬μ›λ”© (SSH ν„°λ„) μ‚¬μ© β…
- λ³΄μ•μ„± μ°μ (SSH μ•”νΈν™”)
- λ°©ν™”λ²½ μ„¤μ • λ¶ν•„μ”
- μ™Έλ¶€ ν¬νΈ λ…Έμ¶ μ—†μ

**ν”„λ΅λ•μ…/λ°λ¨**: μ§μ ‘ μ ‘μ†
- λ°©ν™”λ²½ μ„¤μ • ν•„μ”
- X-API-Key μΈμ¦ ν•„μ
- λ¦¬λ²„μ¤ ν”„λ΅μ‹(Nginx) μ‚¬μ© κ¶μ¥
