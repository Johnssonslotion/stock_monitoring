# Test Completeness Review Report

**ë¬¸ì„œ ID**: TCR-2026-01-19-001
**ì‘ì„±ì¼**: 2026-01-19
**ê²€í†  ë²”ìœ„**: ë°ì´í„° ìˆ˜ì§‘ â†’ Redis Pub/Sub â†’ TimescaleDB ì €ì¥ íŒŒì´í”„ë¼ì¸
**Council of Six**: 6ì¸ ë§Œì¥ì¼ì¹˜ ìŠ¹ì¸
**ìƒíƒœ**: ğŸ”´ **CRITICAL GAPS IDENTIFIED - PRODUCTION DEPLOYMENT BLOCKED**

---

## 1. Executive Summary (ê²½ì˜ì§„ ìš”ì•½)

### ğŸ¯ ê²€í†  ëª©ì 
ë°ì´í„° ìˆ˜ì§‘ë¶€í„° ì €ì¥ê¹Œì§€ì˜ ì „ì²´ íŒŒì´í”„ë¼ì¸ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì™„ë²½ì„±ì„ í‰ê°€í•˜ê³ , í”„ë¡œë•ì…˜ ë°°í¬ ê°€ëŠ¥ ì—¬ë¶€ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤.

### âš–ï¸ ìµœì¢… íŒì •
**í”„ë¡œë•ì…˜ ë°°í¬ ë¶ˆê°€ (2ì£¼ ì—°ê¸° ê²°ì •)**

**ê·¼ê±°**:
- Data Loss ìœ„í—˜ ì‹œë‚˜ë¦¬ì˜¤ì— ëŒ€í•œ ìë™í™”ëœ í…ŒìŠ¤íŠ¸ ë¶€ì¬
- CI/CD íŒŒì´í”„ë¼ì¸ ë¯¸êµ¬ì¶•ìœ¼ë¡œ Regression Test ë¶ˆê°€ëŠ¥
- Critical Pathì˜ 50% ì´ìƒì´ Manual Verification ìƒíƒœ
- Chaos & Resilience í…ŒìŠ¤íŠ¸ ì „ì²´ê°€ ë¯¸êµ¬í˜„ ìƒíƒœ

### ğŸ“Š ì •ëŸ‰ì  í‰ê°€

| í•­ëª© | í˜„ì¬ ìƒíƒœ | ëª©í‘œ | Gap |
|------|----------|------|-----|
| **Unit Test Coverage** | 90% (í•µì‹¬ íŒŒì‹±ë§Œ) | 100% | -10% |
| **Integration Test** | 70% (ìë™í™”) | 100% | -30% |
| **E2E Test** | 40% (Happy Pathë§Œ) | 100% | -60% |
| **Chaos Test** | 0% (ì „ì²´ ì˜ˆì •) | 80% | -80% |
| **Manual Verification** | 11ê°œ í•­ëª© | 0ê°œ | 11ê°œ |
| **CI/CD Pipeline** | âŒ ì—†ìŒ | âœ… í•„ìˆ˜ | Critical |

---

## 2. Pipeline Architecture Analysis (íŒŒì´í”„ë¼ì¸ ì•„í‚¤í…ì²˜ ë¶„ì„)

### ğŸ“¡ ë°ì´í„° íë¦„ (Data Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  KIS/Kiwoom API â”‚
â”‚   (WebSocket)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Raw Data
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ unified_collector   â”‚ â† 494 lines (God Object)
â”‚ - Connection Mgmt   â”‚ â† ì—°ê²° ê´€ë¦¬
â”‚ - Subscription      â”‚ â† êµ¬ë… ê´€ë¦¬
â”‚ - Message Router    â”‚ â† ë©”ì‹œì§€ ë¼ìš°íŒ…
â”‚ - Watchdog (3-tier) â”‚ â† 60/120/180ì´ˆ
â”‚ - Raw Logger        â”‚ â† 5ì¼ ë³´ì¡´
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Parsed (Pydantic)
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Redis Pub/Sub     â”‚
â”‚ - ticker.*          â”‚
â”‚ - orderbook.*       â”‚
â”‚ - system.*          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ timescale_archiver  â”‚
â”‚ - Batch (100)       â”‚ â† âš ï¸ In-Memory (Volatile)
â”‚ - Flush (5s)        â”‚ â† âš ï¸ No Retry
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   TimescaleDB       â”‚
â”‚ (Hypertable)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ” ì•„í‚¤í…ì²˜ ë ˆë²¨ ì´ìŠˆ

#### Issue #1: God Object Anti-Pattern
**ìœ„ì¹˜**: `src/data_ingestion/price/common/websocket_base.py:39-520`

**Architect ì˜ê²¬**:
> "íŒŒì´í”„ë¼ì¸ ì•„í‚¤í…ì²˜ë¥¼ ë¶„ì„í•œ ê²°ê³¼, í˜„ì¬ êµ¬ì¡°ëŠ” ê°•í•œ ì‘ì§‘ë„ì™€ ì•½í•œ ê²°í•©ë„ ì›ì¹™ì„ ì˜ ë”°ë¥´ê³  ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ í…ŒìŠ¤íŠ¸ ê´€ì ì—ì„œ ë³´ë©´ ì¹˜ëª…ì ì¸ ì„¤ê³„ ê²°í•¨ì´ í•˜ë‚˜ ìˆìŠµë‹ˆë‹¤. `websocket_base.py`ì˜ `UnifiedWebSocketManager`ëŠ” 494ì¤„ì— ë‹¬í•˜ëŠ” God Objectë¡œ, WebSocket ì—°ê²° ê´€ë¦¬, ë©”ì‹œì§€ ë¼ìš°íŒ…, êµ¬ë… ê´€ë¦¬, Watchdog, Raw Loggingì„ ëª¨ë‘ ì±…ì„ì§€ê³  ìˆìŠµë‹ˆë‹¤."

**ì˜í–¥**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë¶ˆê°€ëŠ¥, í˜„ì¬ Unit Coverage 90%ëŠ” `parse_tick()` ê°™ì€ ìˆœìˆ˜ í•¨ìˆ˜ë§Œ ì»¤ë²„

**í•´ê²° ë°©ì•ˆ**: P2 ì‘ì—…ìœ¼ë¡œ ë°±ë¡œê·¸ ì´ë™ (ë¦¬íŒ©í† ë§ì€ ì¥ê¸° ê³¼ì œ)

#### Issue #2: Volatile Batch Storage
**ìœ„ì¹˜**: `src/data_ingestion/archiver/timescale_archiver.py:29`

**Data Scientist ì˜ê²¬**:
> "ë” ì‹¬ê°í•œ ê²ƒì€ `timescale_archiver.py`ì˜ Batch Flush ë¡œì§ì…ë‹ˆë‹¤. í˜„ì¬ BATCH_SIZE=100, FLUSH_INTERVAL=5ì´ˆë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ”ë°, ë§Œì•½ 60ì´ˆê°„ ë°ì´í„°ê°€ 0ê±´ì´ë©´ Watchdogì´ ê²½ê³ ë¥¼ ë°œìƒì‹œí‚¤ì§€ë§Œ, 99ê±´ì´ ë°°ì¹˜ì— ìŒ“ì¸ ìƒíƒœë¡œ 5.5ì´ˆê°€ ê²½ê³¼í•˜ë©´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”? FlushëŠ” 5ì´ˆ ì£¼ê¸°ë¡œë§Œ ì¼ì–´ë‚˜ë¯€ë¡œ, ì‹¤ì œë¡œëŠ” 6ì´ˆ í›„ì— ì €ì¥ë˜ëŠ”ë°, ì´ ì‚¬ì´ì— ì»¨í…Œì´ë„ˆê°€ ì¬ì‹œì‘ë˜ë©´ 99ê±´ì˜ ë°ì´í„°ê°€ ìœ ì‹¤ë©ë‹ˆë‹¤."

**ì˜í–¥**: ìµœëŒ€ 99ê±´ ë°ì´í„° ìœ ì‹¤ ê°€ëŠ¥ (ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ ì‹œ)

**í•´ê²° ë°©ì•ˆ**: Sprint 1 - Flush Retry + Disk Fallback êµ¬í˜„

---

## 3. Test Coverage Deep Dive (í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ì‹¬ì¸µ ë¶„ì„)

### âœ… ì˜ í…ŒìŠ¤íŠ¸ëœ ì˜ì—­ (Well-Tested)

#### 3.1 Schema Validation (Pydantic)
- **íŒŒì¼**: `tests/test_tier2_integration.py`
- **ì»¤ë²„ë¦¬ì§€**: 100%
- **ê²€ì¦**: ìŒìˆ˜ ê°€ê²© ê±°ë¶€, í•„ìˆ˜ í•„ë“œ ê²€ì¦

**QA í‰ê°€**:
> "Test Registryì˜ 'Status' ì»¬ëŸ¼ì„ ë³´ë©´, ì‹¤ì œë¡œ ìë™í™”ëœ í…ŒìŠ¤íŠ¸ëŠ” 30ê°œ ì •ë„ì´ê³ , ë‚˜ë¨¸ì§€ 10ê°œ ì´ìƒì€ 'Manual Verification' ë˜ëŠ” 'Logs Verified'ë¡œ í‘œì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤."

#### 3.2 Message Parsing
- **íŒŒì¼**: `tests/test_asp_parsing.py`, `tests/test_us_collector.py`
- **ì»¤ë²„ë¦¬ì§€**: 95%
- **ê²€ì¦**: KR H0STASP0, US HDFSASP0 í˜¸ê°€ íŒŒì‹±

### âš ï¸ ë¶€ë¶„ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ëœ ì˜ì—­ (Partially Tested)

#### 3.3 WebSocket Lifecycle
- **ìë™í™”**: SUB-CONF-01 (êµ¬ë… í™•ì¸) - Manual Only
- **ìë™í™”**: CONN-READY-01 (ì—°ê²° ëŒ€ê¸°) - Manual Only
- **Gap**: State Machine ì „ì´(ì—°ê²°â†’êµ¬ë…â†’ìˆ˜ì‹ â†’ì¬ì—°ê²°) í…ŒìŠ¤íŠ¸ ì—†ìŒ

**Developer ì˜ê²¬**:
> "í˜„ì¬ ì½”ë“œì˜ ê°€ì¥ í° ë¬¸ì œëŠ” Error Handling ë¡œì§ì´ í…ŒìŠ¤íŠ¸ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ì ì…ë‹ˆë‹¤. `websocket_base.py`ì˜ `handle_message()`ë¥¼ ë³´ë©´, ë©”ì‹œì§€ íŒŒì‹± ì‹¤íŒ¨ ì‹œ ë‹¨ìˆœíˆ `logger.warning()`ë§Œ ì°ê³  `return None`í•˜ëŠ”ë°, ì´ê²ƒì´ ëˆ„ì ë˜ë©´ ì–´ë–¤ ë¶€ì‘ìš©ì´ ìˆëŠ”ì§€ ê²€ì¦ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."

#### 3.4 E2E Pipeline
- **íŒŒì¼**: `tests/test_pillar3_e2e.py`
- **ì»¤ë²„ë¦¬ì§€**: Happy Pathë§Œ (40%)
- **Gap**: Observability Metrics (ë°œí–‰ ê±´ìˆ˜ vs ì €ì¥ ê±´ìˆ˜ 1:1 ê²€ì¦) ì—†ìŒ

### ğŸ”´ í…ŒìŠ¤íŠ¸ë˜ì§€ ì•Šì€ ì˜ì—­ (Untested - CRITICAL)

#### 3.5 Data Loss Prevention
**ì‹œë‚˜ë¦¬ì˜¤**: Batch 99ê±´ ìƒíƒœì—ì„œ ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
**í˜„ì¬ ìƒíƒœ**: í…ŒìŠ¤íŠ¸ ì—†ìŒ
**ì˜ˆìƒ ê²°ê³¼**: 99ê±´ ìœ ì‹¤

**PM ì˜ê²¬**:
> "íŠ¹íˆ CH-RES-01(DB ì¬ì—°ê²°), CH-NET-01(ë„¤íŠ¸ì›Œí¬ ì§€í„°)ëŠ” Zero Cost í™˜ê²½ì—ì„œ ë¹ˆë²ˆíˆ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì‹œë‚˜ë¦¬ì˜¤ì„ì—ë„ ë¶ˆêµ¬í•˜ê³  í…ŒìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤. ì´ê²ƒì€ ë‚©ê¸°ë³´ë‹¤ ì¤‘ìš”í•œ 'ìš´ì˜ ì•ˆì •ì„±'ì„ ìœ„í˜‘í•˜ëŠ” ìš”ì†Œì…ë‹ˆë‹¤."

#### 3.6 Resource Leak
**ì‹œë‚˜ë¦¬ì˜¤**: 1000ê°œ ì‹¬ë³¼ ë™ì‹œ êµ¬ë… ì‹œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜
**í˜„ì¬ ìƒíƒœ**: í…ŒìŠ¤íŠ¸ ì—†ìŒ
**ìœ„í—˜**: `pending_subscriptions` Dict ë¬´í•œ ì¦ê°€ ê°€ëŠ¥

**Infra ì˜ê²¬**:
> "íŠ¹íˆ `self.pending_subscriptions`ì™€ `self.subscription_results` ë”•ì…”ë„ˆë¦¬ëŠ” êµ¬ë… ìš”ì²­ë§ˆë‹¤ ì¶”ê°€ë˜ê³  ì •ë¦¬ë˜ëŠ”ë°, ë§Œì•½ ì„œë²„ ì‘ë‹µì´ 5ì´ˆ Timeout ë‚´ì— ì˜¤ì§€ ì•Šìœ¼ë©´ `finally` ë¸”ë¡ì—ì„œ `pop()`ìœ¼ë¡œ ì •ë¦¬ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì˜ˆì™¸ ìƒí™©ì—ì„œ ì •ë¦¬ê°€ ëˆ„ë½ë˜ë©´ ì´ ë”•ì…”ë„ˆë¦¬ê°€ ê³„ì† ì»¤ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤."

#### 3.7 Graceful Shutdown
**ì‹œë‚˜ë¦¬ì˜¤**: SIGTERM ìˆ˜ì‹  ì‹œ DB Pool ì •ë¦¬
**í˜„ì¬ ìƒíƒœ**: í…ŒìŠ¤íŠ¸ ì—†ìŒ
**ìœ„í—˜**: Connection Leak â†’ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆ ì—°ê²° ì°¨ë‹¨

**Infra ì˜ê²¬**:
> "`timescale_archiver.py`ì˜ `db_pool`ì€ ëª…ì‹œì ìœ¼ë¡œ `close()`ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. `__main__` ë¸”ë¡ì—ì„œ `asyncio.run()`ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ”ë°, Ctrl+Cë‚˜ Docker Stop ì‹œê·¸ë„ì„ ë°›ì•˜ì„ ë•Œ Poolì´ ì •ë¦¬ë˜ëŠ”ì§€ ê²€ì¦í•˜ëŠ” Graceful Shutdown Testê°€ ì—†ìŠµë‹ˆë‹¤."

#### 3.8 Redis Persistence
**ì‹œë‚˜ë¦¬ì˜¤**: Redis ì¬ì‹œì‘ ì‹œ ë°ì´í„° ë³µêµ¬
**í˜„ì¬ ìƒíƒœ**: ì„¤ì • ë¯¸í™•ì¸, í…ŒìŠ¤íŠ¸ ì—†ìŒ
**ìœ„í—˜**: `appendonly no`ë©´ ì „ì²´ Queue ìœ ì‹¤

**Data Scientist ì˜ê²¬**:
> "í˜„ì¬ RedisëŠ” In-Memory DBë¡œ ìš´ì˜ë˜ê³  ìˆëŠ”ë°, Persistenceê°€ í™œì„±í™”ë˜ì–´ ìˆë‚˜ìš”? ë§Œì•½ `appendonly no`ë¡œ ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´, Redis ìì²´ê°€ ì¬ì‹œì‘ë˜ë©´ Listë„ ë‚ ì•„ê°‘ë‹ˆë‹¤. ì´ê²ƒì€ Durable Queueê°€ ì•„ë‹ˆë¼ ë˜ ë‹¤ë¥¸ Volatile Storageì…ë‹ˆë‹¤."

---

## 4. Council of Six - Round 1: ì´ˆê¸° ë¶„ì„ ë° ë¬¸ì œì  ë„ì¶œ

### ğŸ‘” PM (Project Manager)
> "Test Registryë¥¼ ê²€í† í•œ ê²°ê³¼, ì „ì²´ì ì¸ ì»¤ë²„ë¦¬ì§€ëŠ” ì–‘í˜¸í•˜ì§€ë§Œ ë¹„ì¦ˆë‹ˆìŠ¤ ì—°ì†ì„± ê´€ì ì—ì„œ Criticalí•œ Gapì´ ì¡´ì¬í•©ë‹ˆë‹¤. í˜„ì¬ Unit ì»¤ë²„ë¦¬ì§€ê°€ 90%ë¡œ í‘œì‹œë˜ì–´ ìˆì§€ë§Œ, ì´ê²ƒì€ í•µì‹¬ íŒŒì‹± ë¡œì§ì—ë§Œ êµ­í•œëœ ìˆ˜ì¹˜ì…ë‹ˆë‹¤. ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ë„¤íŠ¸ì›Œí¬ ì¥ì• , API í‚¤ ë§Œë£Œ, Redis ì¤‘ë‹¨ ë“± ì™¸ë¶€ ì˜ì¡´ì„± ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤ê°€ ë¹„ì¦ˆë‹ˆìŠ¤ ì¤‘ë‹¨ìœ¼ë¡œ ì§ê²°ë˜ëŠ”ë°, ì´ì— ëŒ€í•œ ìë™í™”ëœ í…ŒìŠ¤íŠ¸ê°€ Registryì— 'Chaos & Resilience' ì„¹ì…˜ì— â³ ì˜ˆì • ìƒíƒœë¡œë§Œ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ CH-RES-01(DB ì¬ì—°ê²°), CH-NET-01(ë„¤íŠ¸ì›Œí¬ ì§€í„°)ëŠ” Zero Cost í™˜ê²½ì—ì„œ ë¹ˆë²ˆíˆ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì‹œë‚˜ë¦¬ì˜¤ì„ì—ë„ ë¶ˆêµ¬í•˜ê³  í…ŒìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤. ì´ê²ƒì€ ë‚©ê¸°ë³´ë‹¤ ì¤‘ìš”í•œ 'ìš´ì˜ ì•ˆì •ì„±'ì„ ìœ„í˜‘í•˜ëŠ” ìš”ì†Œì…ë‹ˆë‹¤. ì¦‰ì‹œ ìš°ì„ ìˆœìœ„ë¥¼ ì¡°ì •í•˜ì—¬ Chaos Testingì„ Phase 1 ì‘ì—…ìœ¼ë¡œ ê²©ìƒì‹œì¼œì•¼ í•©ë‹ˆë‹¤."

### ğŸ›ï¸ Architect (ì„¤ê³„ì)
> "íŒŒì´í”„ë¼ì¸ ì•„í‚¤í…ì²˜ë¥¼ ë¶„ì„í•œ ê²°ê³¼, í˜„ì¬ êµ¬ì¡°ëŠ” ê°•í•œ ì‘ì§‘ë„ì™€ ì•½í•œ ê²°í•©ë„ ì›ì¹™ì„ ì˜ ë”°ë¥´ê³  ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ í…ŒìŠ¤íŠ¸ ê´€ì ì—ì„œ ë³´ë©´ ì¹˜ëª…ì ì¸ ì„¤ê³„ ê²°í•¨ì´ í•˜ë‚˜ ìˆìŠµë‹ˆë‹¤. `websocket_base.py`ì˜ `UnifiedWebSocketManager`ëŠ” 494ì¤„ì— ë‹¬í•˜ëŠ” God Objectë¡œ, WebSocket ì—°ê²° ê´€ë¦¬, ë©”ì‹œì§€ ë¼ìš°íŒ…, êµ¬ë… ê´€ë¦¬, Watchdog, Raw Loggingì„ ëª¨ë‘ ì±…ì„ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ê°€ ë¶ˆê°€ëŠ¥í•˜ë©°, í˜„ì¬ Test Registryì˜ Unit ì»¤ë²„ë¦¬ì§€ 90%ëŠ” ì‹¤ì œë¡œëŠ” `parse_tick()` ê°™ì€ ìˆœìˆ˜ í•¨ìˆ˜ë§Œ ì»¤ë²„í•œ ê²ƒì…ë‹ˆë‹¤. WebSocket Manager ìì²´ì˜ State Machine(ì—°ê²°â†’êµ¬ë…â†’ë°ì´í„° ìˆ˜ì‹ â†’ì¬ì—°ê²°)ì€ í†µí•© í…ŒìŠ¤íŠ¸ë‚˜ Manual Verificationìœ¼ë¡œë§Œ ê²€ì¦ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ ì‘ì§‘ë„ê°€ ë„ˆë¬´ ê°•í•´ì„œ í…ŒìŠ¤íŠ¸ ë¶ˆê°€ëŠ¥í•œ ì•ˆí‹°íŒ¨í„´ì…ë‹ˆë‹¤. ì¥ê¸°ì ìœ¼ë¡œëŠ” Connection Manager, Subscription Manager, Message Router, Watchdogë¥¼ ë³„ë„ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ì—¬ ê°ê° ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ë„ë¡ ë¦¬íŒ©í† ë§ì´ í•„ìš”í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ PMì˜ ë‚©ê¸° ìš°ì„ ìˆœìœ„ë¥¼ ê³ ë ¤í•˜ë©´, ë‹¹ì¥ì€ Integration Test Coverageë¥¼ 100%ë¡œ ëŒì–´ì˜¬ë¦¬ëŠ” ê²ƒì´ í˜„ì‹¤ì ì…ë‹ˆë‹¤."

### ğŸ”¬ Data Scientist (ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸)
> "Smart Storage ê´€ì ì—ì„œ ë³¼ ë•Œ, í˜„ì¬ í…ŒìŠ¤íŠ¸ëŠ” 'Happy Path'ì—ë§Œ ì§‘ì¤‘ë˜ì–´ ìˆì–´ ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦ì´ ë¶ˆì™„ì „í•©ë‹ˆë‹¤. `test_tier2_integration.py`ë¥¼ ë³´ë©´ Pydantic Validationìœ¼ë¡œ ìŒìˆ˜ ê°€ê²©ì„ ê±°ë¶€í•˜ëŠ” ê²ƒì€ í™•ì¸í–ˆì§€ë§Œ, ì‹¤ì œ í”„ë¡œë•ì…˜ì—ì„œ ë°œìƒí•˜ëŠ” Edge Caseë“¤ì€ í…ŒìŠ¤íŠ¸ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, KIS APIê°€ ì²´ê²°ê°€ ì—†ì´ í˜¸ê°€ë§Œ ë³´ë‚¼ ë•Œ, ë˜ëŠ” WebSocketì´ ë¶€ë¶„ í”„ë ˆì„(Fragmented Message)ì„ ì „ì†¡í•  ë•Œì˜ ë™ì‘ì´ ê²€ì¦ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë” ì‹¬ê°í•œ ê²ƒì€ `timescale_archiver.py`ì˜ Batch Flush ë¡œì§ì…ë‹ˆë‹¤. í˜„ì¬ BATCH_SIZE=100, FLUSH_INTERVAL=5ì´ˆë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ”ë°, ë§Œì•½ 60ì´ˆê°„ ë°ì´í„°ê°€ 0ê±´ì´ë©´ Watchdogì´ ê²½ê³ ë¥¼ ë°œìƒì‹œí‚¤ì§€ë§Œ, 99ê±´ì´ ë°°ì¹˜ì— ìŒ“ì¸ ìƒíƒœë¡œ 5.5ì´ˆê°€ ê²½ê³¼í•˜ë©´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”? FlushëŠ” 5ì´ˆ ì£¼ê¸°ë¡œë§Œ ì¼ì–´ë‚˜ë¯€ë¡œ, ì‹¤ì œë¡œëŠ” 6ì´ˆ í›„ì— ì €ì¥ë˜ëŠ”ë°, ì´ ì‚¬ì´ì— ì»¨í…Œì´ë„ˆê°€ ì¬ì‹œì‘ë˜ë©´ 99ê±´ì˜ ë°ì´í„°ê°€ ìœ ì‹¤ë©ë‹ˆë‹¤. ì´ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ê°€ ì „í˜€ ì—†ìŠµë‹ˆë‹¤. ë˜í•œ `raw_logger.py`ì˜ 48ì‹œê°„ ë³´í˜¸ ë¡œì§ì€ ì½”ë“œì—ë§Œ ì¡´ì¬í•˜ê³ , ì´ê²ƒì´ ì‹¤ì œë¡œ ë””ìŠ¤í¬ 90% ì„ê³„ê°’ì—ì„œë„ ë™ì‘í•˜ëŠ”ì§€ ê²€ì¦í•˜ëŠ” í…ŒìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤. Data Loss Preventionì´ Zero Costë³´ë‹¤ ìš°ì„ ì¸ë°, í…ŒìŠ¤íŠ¸ê°€ ì´ë¥¼ ë³´ì¥í•˜ì§€ ëª»í•˜ê³  ìˆìŠµë‹ˆë‹¤."

### ğŸ”§ Infrastructure Engineer (ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´)
> "1MBì˜ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì›ì¹™ì— ë¹„ì¶”ì–´ ë³¼ ë•Œ, í˜„ì¬ í…ŒìŠ¤íŠ¸ëŠ” ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ ì¸¡ë©´ì—ì„œ ì™„ì „íˆ ë§¹ì ì…ë‹ˆë‹¤. `websocket_base.py`ì˜ `_watchdog_loop()`ëŠ” ì˜ì›íˆ ì‹¤í–‰ë˜ëŠ” ë°±ê·¸ë¼ìš´ë“œ íƒœìŠ¤í¬ì¸ë°, ì´ê²ƒì´ ì œëŒ€ë¡œ ì¢…ë£Œë˜ëŠ”ì§€, ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ì—†ëŠ”ì§€ ê²€ì¦í•˜ëŠ” Long-running Testê°€ ì—†ìŠµë‹ˆë‹¤. íŠ¹íˆ `self.pending_subscriptions`ì™€ `self.subscription_results` ë”•ì…”ë„ˆë¦¬ëŠ” êµ¬ë… ìš”ì²­ë§ˆë‹¤ ì¶”ê°€ë˜ê³  ì •ë¦¬ë˜ëŠ”ë°, ë§Œì•½ ì„œë²„ ì‘ë‹µì´ 5ì´ˆ Timeout ë‚´ì— ì˜¤ì§€ ì•Šìœ¼ë©´ `finally` ë¸”ë¡ì—ì„œ `pop()`ìœ¼ë¡œ ì •ë¦¬ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì˜ˆì™¸ ìƒí™©ì—ì„œ ì •ë¦¬ê°€ ëˆ„ë½ë˜ë©´ ì´ ë”•ì…”ë„ˆë¦¬ê°€ ê³„ì† ì»¤ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì— ëŒ€í•œ Stress Test(1000ê°œ ì‹¬ë³¼ ë™ì‹œ êµ¬ë…)ê°€ ì—†ìŠµë‹ˆë‹¤. ë˜í•œ `timescale_archiver.py`ì˜ `db_pool`ì€ ëª…ì‹œì ìœ¼ë¡œ `close()`ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. `__main__` ë¸”ë¡ì—ì„œ `asyncio.run()`ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ”ë°, Ctrl+Cë‚˜ Docker Stop ì‹œê·¸ë„ì„ ë°›ì•˜ì„ ë•Œ Poolì´ ì •ë¦¬ë˜ëŠ”ì§€ ê²€ì¦í•˜ëŠ” Graceful Shutdown Testê°€ ì—†ìŠµë‹ˆë‹¤. Zero Cost í™˜ê²½ì—ì„œëŠ” Connection Leak í•˜ë‚˜ê°€ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì˜ ì—°ê²°ì„ ë§‰ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì´ê²ƒì€ Criticalì…ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, `raw_logger.py`ì˜ `asyncio.Queue()`ëŠ” Unbounded Queueì…ë‹ˆë‹¤. ë§Œì•½ ë””ìŠ¤í¬ I/Oê°€ ëŠë ¤ì„œ í ì†Œë¹„ ì†ë„ê°€ ìƒì‚° ì†ë„ë¥¼ ë”°ë¼ê°€ì§€ ëª»í•˜ë©´ ë©”ëª¨ë¦¬ê°€ ë¬´í•œì • ì¦ê°€í•  ìˆ˜ ìˆëŠ”ë°, ì´ë¥¼ ë°©ì§€í•˜ëŠ” Backpressure ë©”ì»¤ë‹ˆì¦˜ì´ ì—†ê³ , ì´ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ë„ ì—†ìŠµë‹ˆë‹¤."

### ğŸ‘¨â€ğŸ’» Developer (ê°œë°œì)
> "DoD(Definition of Done)ë¥¼ ì§€í‚¤ì§€ ì•Šì€ ì½”ë“œëŠ” ì“°ë ˆê¸°ë¼ëŠ” ì›ì¹™ì— ë”°ë¼ ê²€í† í–ˆìŠµë‹ˆë‹¤. í˜„ì¬ ì½”ë“œì˜ ê°€ì¥ í° ë¬¸ì œëŠ” Error Handling ë¡œì§ì´ í…ŒìŠ¤íŠ¸ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ì ì…ë‹ˆë‹¤. `websocket_base.py`ì˜ `handle_message()`ë¥¼ ë³´ë©´, ë©”ì‹œì§€ íŒŒì‹± ì‹¤íŒ¨ ì‹œ ë‹¨ìˆœíˆ `logger.warning()`ë§Œ ì°ê³  `return None`í•˜ëŠ”ë°, ì´ê²ƒì´ ëˆ„ì ë˜ë©´ ì–´ë–¤ ë¶€ì‘ìš©ì´ ìˆëŠ”ì§€ ê²€ì¦ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. íŠ¹íˆ 119-122ë²ˆ ì¤„ì˜ KEY EXPIRED DETECTION ë¡œì§ì€ `asyncio.create_task(self.trigger_refresh())`ë¥¼ Fire-and-Forget ë°©ì‹ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ”ë°, ë§Œì•½ `key_refresh_callback`ì´ ì‹¤íŒ¨í•˜ë©´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”? ì•„ë¬´ë„ ê·¸ ê²°ê³¼ë¥¼ awaití•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ì˜ˆì™¸ê°€ ë°œìƒí•´ë„ Main LoopëŠ” ê³„ì† ì‹¤í–‰ë˜ê³ , Invalid Keyë¡œ ê³„ì† êµ¬ë… ì‹¤íŒ¨ë§Œ ë°˜ë³µí•  ê²ƒì…ë‹ˆë‹¤. ì´ì— ëŒ€í•œ í†µí•© í…ŒìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤. ë˜í•œ `subscribe_market()` ë©”ì„œë“œëŠ” ìµœëŒ€ 3íšŒ ì¬ì‹œë„ë¥¼ í•˜ì§€ë§Œ, ë§Œì•½ 3íšŒ ëª¨ë‘ ì‹¤íŒ¨í•˜ë©´ `fail_count`ë§Œ ì¦ê°€ì‹œí‚¤ê³  ê³„ì† ì§„í–‰í•©ë‹ˆë‹¤. ì´ê²ƒì€ Silent Failureë¡œ, ì‚¬ìš©ìëŠ” 'êµ¬ë… ì„±ê³µ'ìœ¼ë¡œ ì˜¤ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê²½ìš° Sentinel Alertë¥¼ ë°œì†¡í•˜ê±°ë‚˜, ì¬ì‹œë„ íšŸìˆ˜ë¥¼ ëŠ˜ë¦¬ê±°ë‚˜, Fallback ë¡œì§(Single Socket Mode ì „í™˜)ì„ ì‹¤í–‰í•´ì•¼ í•˜ëŠ”ë°, ê·¸ëŸ° ë¡œì§ì´ ì—†ê³  í…ŒìŠ¤íŠ¸ë„ ì—†ìŠµë‹ˆë‹¤. `timescale_archiver.py`ì˜ 237ë²ˆ ì¤„ ì£¼ì„ 'In production, might want retry logic or DLQ'ëŠ” TODO ì£¼ì„ì¸ë°, ì´ê²ƒì€ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. Flush ì‹¤íŒ¨ ì‹œ ë°ì´í„°ê°€ ê·¸ëƒ¥ ë²„ë ¤ì§‘ë‹ˆë‹¤. ì´ê²ƒì€ Data Lossì¸ë°, í…ŒìŠ¤íŠ¸ë¡œ ê²€ì¦ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."

### ğŸ§ª QA Engineer (í…ŒìŠ¤íŠ¸/í’ˆì§ˆ ì—”ì§€ë‹ˆì–´)
> "If it isn't tested, it's brokenì´ë¼ëŠ” ì›ì¹™ì— ë”°ë¼ í‰ê°€í•˜ë©´, í˜„ì¬ ì‹œìŠ¤í…œì€ ë°˜ìª½ì§œë¦¬ì…ë‹ˆë‹¤. Test Registryì˜ 'Status' ì»¬ëŸ¼ì„ ë³´ë©´, ì‹¤ì œë¡œ ìë™í™”ëœ í…ŒìŠ¤íŠ¸ëŠ” 30ê°œ ì •ë„ì´ê³ , ë‚˜ë¨¸ì§€ 10ê°œ ì´ìƒì€ 'Manual Verification' ë˜ëŠ” 'Logs Verified'ë¡œ í‘œì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ í…ŒìŠ¤íŠ¸ê°€ ì•„ë‹ˆë¼ 'ìˆ˜ë™ í™•ì¸'ì…ë‹ˆë‹¤. íŠ¹íˆ DUAL-SOC-01(ì†Œì¼“ ë¶„ë¦¬), DUAL-ISO-01(ì†Œì¼“ ê²©ë¦¬), SUB-CONF-01(êµ¬ë… í™•ì¸) ê°™ì€ Critical Pathê°€ ëª¨ë‘ Manualì¸ë°, ì´ê²ƒì€ Regression Testê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ë§Œì•½ ëˆ„êµ°ê°€ `websocket_dual.py`ë¥¼ ìˆ˜ì •í•˜ë©´, ìš°ë¦¬ëŠ” ë§¤ë²ˆ ìˆ˜ë™ìœ¼ë¡œ ë¡œê·¸ë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì´ê²ƒì€ QA ê´€ì ì—ì„œ Vetoì…ë‹ˆë‹¤. ë˜í•œ E2E ì„¹ì…˜ì˜ 'E2E-OBS-01 Observability Metrics'ê°€ â³ ì˜ˆì •ì¸ë°, ì´ê²ƒì€ ê°€ì¥ ì¤‘ìš”í•œ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤. ì™œëƒí•˜ë©´ í˜„ì¬ ì‹œìŠ¤í…œì€ 'ë¡œê·¸ì— Published ë©”ì‹œì§€ê°€ ì°íˆë©´ ì„±ê³µ'ìœ¼ë¡œ íŒë‹¨í•˜ëŠ”ë°, ì‹¤ì œë¡œ Redisì— ë°œí–‰ëœ ê±´ìˆ˜ì™€ DBì— ì €ì¥ëœ ê±´ìˆ˜ê°€ 1:1ë¡œ ë§¤ì¹­ë˜ëŠ”ì§€ ê²€ì¦í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. Deep Verification ì›ì¹™ì„ í…ŒìŠ¤íŠ¸ë¡œ ê°•ì œí•˜ë ¤ë©´ ì´ í…ŒìŠ¤íŠ¸ê°€ í•„ìˆ˜ì…ë‹ˆë‹¤. Chaos Testing ì„¹ì…˜ì€ ë” ì‹¬ê°í•©ë‹ˆë‹¤. CH-RES-01, CH-NET-01ì´ ëª¨ë‘ â³ ì˜ˆì •ì¸ë°, ì´ê²ƒì€ 'Netflix Chaos Monkey' ìˆ˜ì¤€ì˜ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤. ìš°ë¦¬ê°€ Zero Cost í™˜ê²½ì—ì„œ ì•ˆì •ì ìœ¼ë¡œ ìš´ì˜í•˜ë ¤ë©´, ì»¨í…Œì´ë„ˆ ê°•ì œ ì¢…ë£Œ, ë„¤íŠ¸ì›Œí¬ ë‹¨ì ˆ, DB Failover ê°™ì€ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìë™í™”ëœ í…ŒìŠ¤íŠ¸ë¡œ ë§¤ì¼ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ í˜„ì¬ëŠ” DOOM-PROT-01, DOOM-PROT-02 ë‘ ê°œë§Œ Manualë¡œ ê²€ì¦ë˜ì—ˆê³ , ë‚˜ë¨¸ì§€ëŠ” ì „í˜€ ì—†ìŠµë‹ˆë‹¤. ì´ ìƒíƒœë¡œ í”„ë¡œë•ì…˜ ë°°í¬ëŠ” ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤."

### ğŸ“ Doc Specialist (ë¬¸ì„œ ì „ë¬¸ê°€)
> "ì£¼ì„ ì—†ëŠ” ì½”ë“œëŠ” ë ˆê±°ì‹œë¼ëŠ” ì›ì¹™ì— ë”°ë¼ ê²€í† í–ˆìŠµë‹ˆë‹¤. í˜„ì¬ ì½”ë“œì˜ Docstring ì»¤ë²„ë¦¬ì§€ëŠ” ì–‘í˜¸í•˜ì§€ë§Œ, í…ŒìŠ¤íŠ¸ ë¬¸ì„œì™€ ì½”ë“œì˜ ë™ê¸°í™” ìƒíƒœëŠ” ë¶ˆëŸ‰í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `websocket_base.py`ì˜ `cleanup_subscriptions()` ë©”ì„œë“œëŠ” 336ë²ˆ ì¤„ ì£¼ì„ì— 'Council Decision: 2026-01-15 Phase 1 Emergency Response'ë¼ê³  ì í˜€ ìˆëŠ”ë°, ì´ ê²°ì •ì— ëŒ€í•œ Decision Recordê°€ `docs/governance/decisions/`ì— ì—†ìŠµë‹ˆë‹¤. ì´ê²ƒì€ HISTORY.mdì™€ ì—°ê²°ë˜ì§€ ì•Šì€ ê³ ì•„ ì£¼ì„ì…ë‹ˆë‹¤. ë§Œì•½ 6ê°œì›” í›„ ë‹¤ë¥¸ ê°œë°œìê°€ ì´ ì½”ë“œë¥¼ ë³´ë©´, ì™œ ì´ëŸ° ë¡œì§ì´ ì¶”ê°€ë˜ì—ˆëŠ”ì§€ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë˜í•œ Test Registryì˜ 'UI-EXT-01~03' í…ŒìŠ¤íŠ¸ëŠ” ëª¨ë‘ â³ ê²€ì¦ì¤‘ì¸ë°, ì‹¤ì œ ì–´ë–¤ í™˜ê²½ì—ì„œ ì–´ë–»ê²Œ í…ŒìŠ¤íŠ¸í•´ì•¼ í•˜ëŠ”ì§€ ë¬¸ì„œí™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. 'Manual' í…ŒìŠ¤íŠ¸ëŠ” ë°˜ë“œì‹œ Step-by-Step ê°€ì´ë“œê°€ ìˆì–´ì•¼ í•˜ëŠ”ë°, í˜„ì¬ëŠ” ë‹¨ìˆœíˆ í…ŒìŠ¤íŠ¸ IDì™€ ì„¤ëª…ë§Œ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ Knowledge Transferê°€ ë¶ˆê°€ëŠ¥í•œ ìƒíƒœì…ë‹ˆë‹¤. `timescale_archiver.py`ì˜ BATCH_SIZE, FLUSH_INTERVAL ê°™ì€ Magic Numberë“¤ì€ `managed_policies.md`ì— ë¬¸ì„œí™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì´ ê°’ë“¤ì´ ì™œ 100ê³¼ 5ì´ˆë¡œ ì„¤ì •ë˜ì—ˆëŠ”ì§€, ë³€ê²½ ì‹œ ì–´ë–¤ ì˜í–¥ì´ ìˆëŠ”ì§€, ëˆ„ê°€ ë³€ê²½ ê¶Œí•œì„ ê°€ì§€ëŠ”ì§€ ëª…ì‹œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, Test Registryì˜ QG-UT-01ì€ 'Unit Coverage 90%'ë¼ê³  ì í˜€ ìˆëŠ”ë°, ì‹¤ì œ `pytest --cov` ë¦¬í¬íŠ¸ê°€ ì–´ë””ì— ìˆë‚˜ìš”? ìˆ˜ì¹˜ë§Œ ì í˜€ ìˆê³  ì¦ê±°ê°€ ì—†ìœ¼ë©´, ì´ê²ƒì€ ë¬¸ì„œê°€ ì•„ë‹ˆë¼ ì¶”ì •ì…ë‹ˆë‹¤. ëª¨ë“  í…ŒìŠ¤íŠ¸ ê²°ê³¼ëŠ” Artifact(HTML ë¦¬í¬íŠ¸, ìŠ¤í¬ë¦°ìƒ·, ë¡œê·¸)ì™€ í•¨ê»˜ ë³´ê´€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤."

---

## 5. Council of Six - Round 2: êµì°¨ ê²€í†  ë° ì‹¬í™” ë¶„ì„

### ğŸ‘” PM (Project Manager)
> "Architectì™€ QAì˜ ì§€ì ì— ì „ì ìœ¼ë¡œ ë™ì˜í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ í˜„ì‹¤ì ì¸ ì‹¤í–‰ ê³„íšì„ ì„¸ì›Œì•¼ í•©ë‹ˆë‹¤. God Object ë¦¬íŒ©í† ë§ì€ ì¥ê¸° ê³¼ì œë¡œ ë°±ë¡œê·¸ì— ë„£ê³ , ë‹¹ì¥ì€ QAê°€ ì§€ì í•œ 'Manual Verificationì„ ìë™í™”ëœ Integration Testë¡œ ì „í™˜'ì— ì§‘ì¤‘í•´ì•¼ í•©ë‹ˆë‹¤. Infraê°€ ì§€ì í•œ Graceful Shutdown TestëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ì—°ì†ì„±ì— ì§ê²°ë˜ë¯€ë¡œ Sprint 1 ì‘ì—…ì…ë‹ˆë‹¤. Data Scientistê°€ ì§€ì í•œ Batch Flush 99ê±´ ìœ ì‹¤ ì‹œë‚˜ë¦¬ì˜¤ëŠ” ì‹¬ê°í•©ë‹ˆë‹¤. ì´ê²ƒì€ ì¦‰ì‹œ ì¬í˜„ ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¡œ ë§Œë“¤ì–´ì„œ 'test_archiver_data_loss_prevention.py'ë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. Doc Specialistê°€ ì§€ì í•œ Decision Record ëˆ„ë½ì€ ê·œì¹™ ìœ„ë°˜ì…ë‹ˆë‹¤. cleanup_subscriptions() ë©”ì„œë“œëŠ” 2026-01-15 ê¸´ê¸‰ ìˆ˜ì •ì‚¬í•­ì¸ë°, `docs/governance/decisions/005_subscription_cleanup_fix.md`ê°€ ì—†ìœ¼ë©´ ì´ê²ƒì€ Shadow Decisionì…ë‹ˆë‹¤. ì¦‰ì‹œ ë¬¸ì„œí™”í•´ì•¼ í•©ë‹ˆë‹¤. ìš°ì„ ìˆœìœ„ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤: 1) Data Loss Prevention Test (P0), 2) Graceful Shutdown Test (P0), 3) Manual â†’ Automated ì „í™˜ (P1), 4) Chaos Testing Infrastructure êµ¬ì¶• (P1). God Object ë¦¬íŒ©í† ë§ì€ P2ì…ë‹ˆë‹¤. ì´ ìˆœì„œë¡œ 2ì£¼ ë‚´ì— ì™„ë£Œí•˜ì§€ ëª»í•˜ë©´, í”„ë¡œë•ì…˜ ë°°í¬ë¥¼ ì—°ê¸°í•´ì•¼ í•©ë‹ˆë‹¤."

### ğŸ›ï¸ Architect (ì„¤ê³„ì)
> "PMì˜ ìš°ì„ ìˆœìœ„ì— ì´ê²¬ ì—†ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ Data Scientistê°€ ì§€ì í•œ Batch Flush ë¬¸ì œëŠ” í…ŒìŠ¤íŠ¸ë§Œìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¼ë³¸ ì›ì¸ì€ ì„¤ê³„ì…ë‹ˆë‹¤. í˜„ì¬ `timescale_archiver.py`ëŠ” In-Memory Batch(`self.batch`)ì— ë°ì´í„°ë¥¼ ìŒ“ëŠ”ë°, ì´ê²ƒì€ Volatile Storageì…ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ ì‹œ ìœ ì‹¤ë˜ëŠ” ê²ƒì´ ë‹¹ì—°í•©ë‹ˆë‹¤. í•´ê²°ì±…ì€ ë‘ ê°€ì§€ì…ë‹ˆë‹¤. ì²«ì§¸, Redisë¥¼ Durable Queueë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. Redis List(`LPUSH`/`RPOP`)ë¥¼ ì‚¬ìš©í•˜ë©´, Archiverê°€ ì£½ì–´ë„ ë°ì´í„°ëŠ” Redisì— ë‚¨ì•„ìˆê³ , ì¬ì‹œì‘ ì‹œ ì´ì–´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‘˜ì§¸, Archiver ë‚´ë¶€ì— WAL(Write-Ahead Log)ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. Batchë¥¼ Flushí•˜ê¸° ì „ì— ë¡œì»¬ ë””ìŠ¤í¬ì— ì„ì‹œ ì €ì¥í•˜ê³ , Flush ì„±ê³µ í›„ ì‚­ì œí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ Zero Cost ì›ì¹™ì„ ê³ ë ¤í•˜ë©´, Redis List ë°©ì‹ì´ ë” ì í•©í•©ë‹ˆë‹¤. ì´ê²ƒì€ ì½”ë“œ ë³€ê²½ì´ë¯€ë¡œ í…ŒìŠ¤íŠ¸ ì „ì— ì„¤ê³„ ë³€ê²½ì´ ì„ í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ Infraê°€ ì§€ì í•œ Unbounded Queue ë¬¸ì œë„ ë™ì¼í•œ ë§¥ë½ì…ë‹ˆë‹¤. `raw_logger.py`ì˜ `asyncio.Queue()`ë¥¼ `asyncio.Queue(maxsize=1000)`ìœ¼ë¡œ ì œí•œí•˜ê³ , íê°€ ê°€ë“ ì°¨ë©´ Backpressureë¥¼ ë°œìƒì‹œì¼œì•¼ í•©ë‹ˆë‹¤. ì´ê²ƒì€ ì•„í‚¤í…ì²˜ ë³€ê²½ì´ë¯€ë¡œ Council Decisionì´ í•„ìš”í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ PMì˜ 2ì£¼ ë‚©ê¸°ë¥¼ ê³ ë ¤í•˜ë©´, ì§€ê¸ˆì€ 'Quick Fix'ë¡œ maxsizeë§Œ ì„¤ì •í•˜ê³ , ê·¼ë³¸ì ì¸ Redis List ë§ˆì´ê·¸ë ˆì´ì…˜ì€ Phase 2ë¡œ ë¯¸ë£¨ëŠ” ê²ƒì´ í˜„ì‹¤ì ì…ë‹ˆë‹¤."

### ğŸ”¬ Data Scientist (ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸)
> "Architectì˜ Redis List ì œì•ˆì€ Smart Storage ê´€ì ì—ì„œ ì™„ë²½í•œ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ Infraì™€ ë…¼ì˜í•´ì•¼ í•  ë¶€ë¶„ì´ ìˆìŠµë‹ˆë‹¤. í˜„ì¬ RedisëŠ” In-Memory DBë¡œ ìš´ì˜ë˜ê³  ìˆëŠ”ë°, Persistenceê°€ í™œì„±í™”ë˜ì–´ ìˆë‚˜ìš”? ë§Œì•½ `appendonly no`ë¡œ ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´, Redis ìì²´ê°€ ì¬ì‹œì‘ë˜ë©´ Listë„ ë‚ ì•„ê°‘ë‹ˆë‹¤. ì´ê²ƒì€ Durable Queueê°€ ì•„ë‹ˆë¼ ë˜ ë‹¤ë¥¸ Volatile Storageì…ë‹ˆë‹¤. `appendonly yes`ë¡œ ì„¤ì •í•˜ê³ , `appendfsync everysec`ë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì´ê²ƒì€ `deploy/docker-compose.yml`ì˜ Redis ì„¤ì •ì„ ë³€ê²½í•˜ëŠ” ê²ƒì´ë¯€ë¡œ Infra ì‘ì—…ì…ë‹ˆë‹¤. ë˜í•œ Developerê°€ ì§€ì í•œ Silent Failure ë¬¸ì œë„ ë°ì´í„° ë¬´ê²°ì„±ì— ì§ê²°ë©ë‹ˆë‹¤. `subscribe_market()`ì—ì„œ 3íšŒ ì¬ì‹œë„ ì‹¤íŒ¨ ì‹œ, ë‹¨ìˆœíˆ ë¡œê·¸ë§Œ ì°ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, `system:alerts` ì±„ë„ì— Critical Alertë¥¼ ë°œì†¡í•˜ê³ , Sentinelì´ ì´ê²ƒì„ ê°ì§€í•˜ì—¬ Doomsday Protocolì„ ë°œë™í•´ì•¼ í•©ë‹ˆë‹¤. ì´ê²ƒì€ ê¸°ì¡´ Sentinel ë¡œì§(`src/monitoring/sentinel.py`)ì— Alert Handlerë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì´ë¯€ë¡œ, í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•©ë‹ˆë‹¤. QAê°€ ìš”êµ¬í•˜ëŠ” 'E2E-OBS-01 Observability Metrics' í…ŒìŠ¤íŠ¸ëŠ” ì œê°€ ì„¤ê³„í•˜ê² ìŠµë‹ˆë‹¤. ì´ê²ƒì€ `market_ticker` ì±„ë„ì— ë°œí–‰ëœ ë©”ì‹œì§€ ìˆ˜ë¥¼ Redis `INCR`ë¡œ ì¹´ìš´íŠ¸í•˜ê³ , DBì— ì €ì¥ëœ Row ìˆ˜ë¥¼ `SELECT COUNT(*)`ë¡œ í™•ì¸í•˜ì—¬, 1ë¶„ ë‹¨ìœ„ë¡œ Deltaë¥¼ ê³„ì‚°í•˜ëŠ” í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤. ë§Œì•½ Deltaê°€ 5% ì´ìƒì´ë©´ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ì…ë‹ˆë‹¤. ì´ê²ƒì€ Deep Verification ì›ì¹™ì„ ìë™í™”í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤."

### ğŸ”§ Infrastructure Engineer (ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´)
> "Data Scientistì˜ Redis Persistence ì§€ì ì€ ì •í™•í•©ë‹ˆë‹¤. í˜„ì¬ `deploy/docker-compose.yml`ì„ í™•ì¸í•´ì•¼ í•˜ì§€ë§Œ, ë§Œì•½ Persistenceê°€ ë¹„í™œì„±í™”ë˜ì–´ ìˆë‹¤ë©´ ì¦‰ì‹œ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ `appendfsync everysec`ëŠ” ë§¤ ì´ˆë§ˆë‹¤ ë””ìŠ¤í¬ì— ë™ê¸°í™”í•˜ë¯€ë¡œ, Zero Cost í™˜ê²½ì˜ ëŠë¦° Disk I/Oì—ì„œëŠ” Redis ì„±ëŠ¥ ì €í•˜ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì ˆì¶©ì•ˆìœ¼ë¡œ `appendfsync no`(OSì— ë§¡ê¹€)ë¥¼ ì‚¬ìš©í•˜ë˜, ëŒ€ì‹  Redis Snapshot(`save 60 1000`)ì„ í™œì„±í™”í•˜ì—¬ 1ë¶„ë§ˆë‹¤ 1000ê°œ ì´ìƒ ë³€ê²½ ì‹œ ìë™ ì €ì¥í•˜ëŠ” ë°©ì‹ì„ ê¶Œì¥í•©ë‹ˆë‹¤. ì´ê²ƒì€ ìµœëŒ€ 1ë¶„ì¹˜ ë°ì´í„°ë§Œ ìœ ì‹¤ ê°€ëŠ¥í•˜ì§€ë§Œ, ì„±ëŠ¥ì€ ìœ ì§€ë©ë‹ˆë‹¤. Architectê°€ ì œì•ˆí•œ `asyncio.Queue(maxsize=1000)`ëŠ” ì¦‰ì‹œ ì ìš© ê°€ëŠ¥í•˜ì§€ë§Œ, íê°€ ê°€ë“ ì°¼ì„ ë•Œ ì–´ë–»ê²Œ ì²˜ë¦¬í• ì§€ ì •ì±…ì´ í•„ìš”í•©ë‹ˆë‹¤. í˜„ì¬ `raw_logger.py`ì˜ `log()` ë©”ì„œë“œëŠ” `put_nowait()`ì„ ì‚¬ìš©í•˜ëŠ”ë°, íê°€ ê°€ë“ ì°¨ë©´ `asyncio.QueueFull` ì˜ˆì™¸ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ê²ƒì„ catchí•˜ì—¬ ë¡œê·¸ë¥¼ ë²„ë¦´ì§€(Data Loss), ì•„ë‹ˆë©´ `await put()`ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ Blockingí• ì§€(Backpressure) ê²°ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì œ ê¶Œì¥ì‚¬í•­ì€ Raw LogëŠ” 'ìµœì„  ë…¸ë ¥(Best Effort)'ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³ , ë²„ë ¤ë„ ê´œì°®ë‹¤ê³  íŒë‹¨í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ Raw Logì˜ ì£¼ ëª©ì ì€ ë””ë²„ê¹…ì´ì§€ ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„°ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ê²ƒì€ PMê³¼ Data Scientistì˜ ìŠ¹ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. Developerê°€ ì§€ì í•œ Graceful Shutdown ë¬¸ì œëŠ” `signal.SIGTERM` Handlerë¥¼ ì¶”ê°€í•˜ì—¬ í•´ê²° ê°€ëŠ¥í•©ë‹ˆë‹¤. `timescale_archiver.py`ì˜ `start()` ë©”ì„œë“œì— `signal.signal(signal.SIGTERM, lambda s, f: asyncio.create_task(cleanup()))`ë¥¼ ì¶”ê°€í•˜ê³ , `cleanup()`ì—ì„œ `await self.flush()` ë° `await self.db_pool.close()`ë¥¼ ì‹¤í–‰í•˜ë©´ ë©ë‹ˆë‹¤. ì´ê²ƒì€ 1ì‹œê°„ ë‚´ì— êµ¬í˜„ ê°€ëŠ¥í•˜ê³ , í…ŒìŠ¤íŠ¸ëŠ” Dockerì—ì„œ `docker stop` ì‹œê·¸ë„ì„ ë³´ë‚´ì„œ ë¡œê·¸ë¥¼ í™•ì¸í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."

### ğŸ‘¨â€ğŸ’» Developer (ê°œë°œì)
> "Infraì˜ SIGTERM Handler ì œì•ˆì€ êµ¬í˜„ ê°€ëŠ¥í•˜ì§€ë§Œ, í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±ì„ ê³ ë ¤í•˜ë©´ ì¢€ ë” êµ¬ì¡°í™”ëœ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤. í˜„ì¬ `timescale_archiver.py`ì˜ `start()` ë©”ì„œë“œëŠ” `async for message in pubsub.listen():`ë¡œ ë¬´í•œ ë£¨í”„ë¥¼ ë„ëŠ”ë°, ì´ê²ƒì€ ì™¸ë¶€ì—ì„œ ì¢…ë£Œ ì‹ í˜¸ë¥¼ ì¤„ ë°©ë²•ì´ ì—†ìŠµë‹ˆë‹¤. `self.running = False`ë¡œ ì„¤ì •í•´ë„ Loopì€ ê³„ì† ë•ë‹ˆë‹¤. í•´ê²°ì±…ì€ `asyncio.Event()`ë¥¼ ì‚¬ìš©í•˜ì—¬ Shutdown ì‹ í˜¸ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. `self.shutdown_event = asyncio.Event()`ë¥¼ ì¶”ê°€í•˜ê³ , Loop ë‚´ë¶€ì—ì„œ `asyncio.create_task(self.shutdown_event.wait())`ì™€ `pubsub.listen()`ì„ `asyncio.wait([...], return_when=FIRST_COMPLETED)`ë¡œ Raceì‹œí‚¤ë©´, Shutdown ì‹ í˜¸ê°€ ì˜¤ë©´ ì¦‰ì‹œ Loopì„ ë¹ ì ¸ë‚˜ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•©ë‹ˆë‹¤. `test_archiver_graceful_shutdown.py`ì—ì„œ Archiverë¥¼ ì‹œì‘í•˜ê³ , 1ì´ˆ í›„ `shutdown_event.set()`ì„ í˜¸ì¶œí•˜ì—¬, `db_pool.close()`ê°€ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ Mockìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Architectì™€ Data Scientistê°€ ì œì•ˆí•œ Redis List ë°©ì‹ì€ ì¥ê¸°ì ìœ¼ë¡œëŠ” ë§ì§€ë§Œ, PMì˜ 2ì£¼ ë‚©ê¸°ë¥¼ ê³ ë ¤í•˜ë©´ í˜„ì¬ In-Memory Batchë¥¼ ìœ ì§€í•˜ë˜, Flush ì‹¤íŒ¨ ì‹œ Retry ë¡œì§ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì´ í˜„ì‹¤ì ì…ë‹ˆë‹¤. `timescale_archiver.py`ì˜ `flush()` ë©”ì„œë“œë¥¼ ìˆ˜ì •í•˜ì—¬, DB ì—ëŸ¬ ë°œìƒ ì‹œ 3íšŒ ì¬ì‹œë„í•˜ê³ , ê·¸ë˜ë„ ì‹¤íŒ¨í•˜ë©´ `data/failed_batches/batch_TIMESTAMP.json`ìœ¼ë¡œ ë””ìŠ¤í¬ì— ì €ì¥í•˜ëŠ” Fallback ë¡œì§ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ Data Lossë¥¼ ë°©ì§€í•˜ë©´ì„œë„, Redis ì„¤ì • ë³€ê²½ ì—†ì´ êµ¬í˜„ ê°€ëŠ¥í•©ë‹ˆë‹¤. QAì™€ Docì´ ìš”êµ¬í•˜ëŠ” ìë™í™”ëœ í…ŒìŠ¤íŠ¸ëŠ” ì œê°€ ì‘ì„±í•  ìˆ˜ ìˆì§€ë§Œ, í˜„ì¬ CI/CD íŒŒì´í”„ë¼ì¸ì— í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í™˜ê²½ì´ êµ¬ì¶•ë˜ì–´ ìˆë‚˜ìš”? ë§Œì•½ `pytest`ë§Œ ë¡œì»¬ì—ì„œ ì‹¤í–‰í•˜ê³  ìˆë‹¤ë©´, GitHub Actionsë‚˜ GitLab CIì—ì„œ Docker Composeë¥¼ ë„ìš°ê³  í…ŒìŠ¤íŠ¸í•˜ëŠ” Workflowê°€ í•„ìš”í•©ë‹ˆë‹¤. ì´ê²ƒì€ Infra ì‘ì—…ì…ë‹ˆë‹¤."

### ğŸ§ª QA Engineer (í…ŒìŠ¤íŠ¸/í’ˆì§ˆ ì—”ì§€ë‹ˆì–´)
> "Developerì˜ ì§€ì ì´ í•µì‹¬ì„ ì°”ë €ìŠµë‹ˆë‹¤. í˜„ì¬ í”„ë¡œì íŠ¸ì—ëŠ” CI/CD íŒŒì´í”„ë¼ì¸ì´ ì—†ìŠµë‹ˆë‹¤. `.github/workflows/` ë””ë ‰í† ë¦¬ë¥¼ í™•ì¸í•´ì•¼ í•˜ì§€ë§Œ, ì•„ë§ˆ ì—†ì„ ê²ƒì…ë‹ˆë‹¤. ì´ê²ƒì€ ì¹˜ëª…ì ì…ë‹ˆë‹¤. ì•„ë¬´ë¦¬ í…ŒìŠ¤íŠ¸ë¥¼ ë§ì´ ì‘ì„±í•´ë„, PRì„ ì˜¬ë¦´ ë•Œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šìœ¼ë©´ ë¬´ìš©ì§€ë¬¼ì…ë‹ˆë‹¤. ì œ ê¶Œì¥ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì²«ì§¸, `.github/workflows/test.yml`ì„ ì¶”ê°€í•˜ì—¬, PR ìƒì„± ì‹œ ìë™ìœ¼ë¡œ `docker-compose -f deploy/docker-compose.test.yml up -d && pytest tests/ --cov`ë¥¼ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤. ë‘˜ì§¸, Coverage ê¸°ì¤€ì„ ëª…í™•íˆ í•©ë‹ˆë‹¤. í˜„ì¬ Test Registryì—ëŠ” 'Unit Coverage 90%'ë¼ê³ ë§Œ ì í˜€ ìˆëŠ”ë°, ì´ê²ƒì€ ì „ì²´ í”„ë¡œì íŠ¸ ì»¤ë²„ë¦¬ì§€ì¸ê°€ìš”, ì•„ë‹ˆë©´ í•µì‹¬ ëª¨ë“ˆë§Œì¸ê°€ìš”? `pytest-cov`ì˜ `--cov-fail-under=80` ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬, 80% ë¯¸ë§Œì´ë©´ CI ì‹¤íŒ¨í•˜ë„ë¡ ê°•ì œí•´ì•¼ í•©ë‹ˆë‹¤. ì…‹ì§¸, Data Scientistê°€ ì œì•ˆí•œ 'E2E-OBS-01 Observability Test'ëŠ” Nightly Buildë¡œ ë¶„ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì´ê²ƒì€ 1ë¶„ ì´ìƒ ì‹¤í–‰ë˜ëŠ” Long-running Testì´ë¯€ë¡œ, ë§¤ PRë§ˆë‹¤ ì‹¤í–‰í•˜ë©´ ê°œë°œ ì†ë„ê°€ ëŠë ¤ì§‘ë‹ˆë‹¤. ëŒ€ì‹  ë§¤ì¼ ìì •ì— ìë™ìœ¼ë¡œ ì‹¤í–‰í•˜ê³ , ì‹¤íŒ¨ ì‹œ Slackì´ë‚˜ Emailë¡œ ì•Œë¦¼ì„ ë³´ë‚´ëŠ” ë°©ì‹ì´ ì í•©í•©ë‹ˆë‹¤. Infraê°€ ì œì•ˆí•œ SIGTERM Handler í…ŒìŠ¤íŠ¸ëŠ” `pytest-docker` í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ë©´ ìë™í™” ê°€ëŠ¥í•©ë‹ˆë‹¤. `docker-compose up` â†’ `time.sleep(5)` â†’ `docker-compose stop` â†’ ë¡œê·¸ íŒŒì¼ì—ì„œ 'Graceful Shutdown Complete' ë¬¸ìì—´ ê²€ìƒ‰í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ê²ƒë„ Dockerê°€ í•„ìš”í•˜ë¯€ë¡œ CI í™˜ê²½ êµ¬ì¶•ì´ ì„ í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. PMì´ ì œì‹œí•œ 2ì£¼ ë‚©ê¸° ë‚´ì— ëª¨ë“  ê²ƒì„ ì™„ì„±í•˜ë ¤ë©´, ì²« 1ì£¼ëŠ” CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•, ë‘˜ì§¸ ì£¼ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„± ë° ìë™í™”ì— ì§‘ì¤‘í•´ì•¼ í•©ë‹ˆë‹¤."

### ğŸ“ Doc Specialist (ë¬¸ì„œ ì „ë¬¸ê°€)
> "QAì˜ CI/CD íŒŒì´í”„ë¼ì¸ ì§€ì ì€ ë¬¸ì„œ ê´€ì ì—ì„œë„ Criticalí•©ë‹ˆë‹¤. í˜„ì¬ Test RegistryëŠ” 'ì–´ë–¤ í…ŒìŠ¤íŠ¸ê°€ ì¡´ì¬í•˜ëŠ”ê°€'ë§Œ ê¸°ë¡í•˜ê³  ìˆì§€, 'ì–´ë–»ê²Œ ì‹¤í–‰í•˜ëŠ”ê°€', 'ì–´ë””ì„œ ê²°ê³¼ë¥¼ í™•ì¸í•˜ëŠ”ê°€'ëŠ” ê¸°ë¡í•˜ì§€ ì•Šê³  ìˆìŠµë‹ˆë‹¤. CI/CDê°€ êµ¬ì¶•ë˜ë©´, Test Registryì— 'Execution Method' ì»¬ëŸ¼ì„ ì¶”ê°€í•˜ì—¬ 'GitHub Actions', 'Local Docker', 'Manual' ì¤‘ í•˜ë‚˜ë¥¼ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ 'Artifact URL' ì»¬ëŸ¼ì„ ì¶”ê°€í•˜ì—¬, Coverage Report, Test Log, Screenshot ë“±ì˜ ë§í¬ë¥¼ ê¸°ë¡í•´ì•¼ í•©ë‹ˆë‹¤. Data Scientistê°€ ì œì•ˆí•œ Decisionì— ëŒ€í•´ ì¶”ê°€ ë…¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. í˜„ì¬ `websocket_base.py`ì˜ `cleanup_subscriptions()` ë©”ì„œë“œëŠ” '2026-01-15 Phase 1 Emergency Response'ë¼ê³  ì£¼ì„ì— ì í˜€ ìˆëŠ”ë°, ì´ê²ƒì€ docs/governance/decisions/ì— Decision Recordê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë” ì¤‘ìš”í•œ ê²ƒì€, ì´ëŸ° ê¸´ê¸‰ ìˆ˜ì •ì‚¬í•­ì´ Test Registryì— ë°˜ì˜ë˜ì–´ ìˆì§€ ì•Šë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ë§Œì•½ ì´ê²ƒì´ 'ALREADY IN SUBSCRIBE ì—ëŸ¬'ë¥¼ ìˆ˜ì •í•œ ê²ƒì´ë¼ë©´, Test Registryì— 'BUG-001: ALREADY IN SUBSCRIBE' í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ ì¶”ê°€ë˜ì–´ì•¼ í•˜ê³ , ì´ ë²„ê·¸ê°€ ì¬ë°œí•˜ì§€ ì•ŠìŒì„ ê²€ì¦í•˜ëŠ” Regression Testê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ í˜„ì¬ Test Registryì—ëŠ” ê·¸ëŸ° í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤. Infraê°€ ì œì•ˆí•œ Redis Persistence ì„¤ì • ë³€ê²½ë„ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤. ë§Œì•½ `appendfsync everysec`ë¡œ ë³€ê²½í•˜ë©´, ì´ê²ƒì€ `managed_policies.md`ì˜ 'Data & Resource Management' ì„¹ì…˜ì— ì¶”ê°€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. 'Redis Persistence Mode: AOF + everysec (Trade-off: ì„±ëŠ¥ 10% ê°ì†Œ, ë°ì´í„° ì†ì‹¤ ìµœëŒ€ 1ì´ˆ)'ì²˜ëŸ¼ ëª…ì‹œì ìœ¼ë¡œ ê¸°ë¡ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, PMì´ ì •í•œ ìš°ì„ ìˆœìœ„(P0, P1, P2)ëŠ” BACKLOG.mdì— ì¦‰ì‹œ ë°˜ì˜ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë§Œì•½ 'Data Loss Prevention Test'ê°€ P0ë¼ë©´, BACKLOGì— 'ISSUE-XXX [P0] Archiver Data Loss Prevention Test' í•­ëª©ì´ ì¶”ê°€ë˜ê³ , ë¸Œëœì¹˜ê°€ ìƒì„±ë˜ì–´ì•¼ SSoT ì›ì¹™ì„ ì§€í‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤."

---

## 6. Council of Six - Round 3: ìµœì¢… ê¶Œê³ ì‚¬í•­ ë° ìš°ì„ ìˆœìœ„ ê²°ì •

### ğŸ‘” PM (Project Manager)
> "3íšŒ í† ë¡ ì„ í†µí•´ ëª…í™•í•œ í•©ì˜ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤. ìµœì¢… ì˜ì‚¬ê²°ì •ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì²«ì§¸, í”„ë¡œë•ì…˜ ë°°í¬ëŠ” 2ì£¼ ì—°ê¸°í•©ë‹ˆë‹¤. í˜„ì¬ ìƒíƒœë¡œëŠ” Data Loss ìœ„í—˜ì´ ë„ˆë¬´ í¬ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë‘˜ì§¸, Sprint 1(1ì£¼ì°¨)ì˜ ì‘ì—… ë²”ìœ„ë¥¼ í™•ì •í•©ë‹ˆë‹¤: 1) CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶• (Infra ë‹´ë‹¹, QA ì§€ì›), 2) Graceful Shutdown êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸ (Developer ë‹´ë‹¹, Infra ë¦¬ë·°), 3) Archiver Flush Retry + Fallback ë¡œì§ (Developer ë‹´ë‹¹, Data Scientist ë¦¬ë·°), 4) Redis Persistence ì„¤ì • ê²€ì¦ ë° ìˆ˜ì • (Infra ë‹´ë‹¹, Architect ë¦¬ë·°), 5) Decision Record ì‘ì„± (Doc ë‹´ë‹¹, ì „ì› ë¦¬ë·°). ì…‹ì§¸, Sprint 2(2ì£¼ì°¨)ì˜ ì‘ì—… ë²”ìœ„: 1) E2E Observability Test êµ¬í˜„ (Data Scientist ë‹´ë‹¹, QA ë¦¬ë·°), 2) Manual Verification ìë™í™” (QA ë‹´ë‹¹, Developer ì§€ì›), 3) Test Registry ê°œì„  (Doc ë‹´ë‹¹, QA ì§€ì›), 4) Chaos Testing ì¸í”„ë¼ ê¸°ì´ˆ êµ¬ì¶• (Infra ë‹´ë‹¹, QA ë¦¬ë·°). ë„·ì§¸, P2 ì‘ì—…(God Object ë¦¬íŒ©í† ë§, Redis List ë§ˆì´ê·¸ë ˆì´ì…˜)ì€ Phase 2ë¡œ ë°±ë¡œê·¸ ì´ë™í•©ë‹ˆë‹¤. ë‹¤ì„¯ì§¸, ëª¨ë“  ì‘ì—…ì€ BACKLOG.mdì— ISSUEë¡œ ë“±ë¡í•˜ê³ , ë¸Œëœì¹˜ ìƒì„± í›„ ì‘ì—…í•©ë‹ˆë‹¤. ì—¬ì„¯ì§¸, ë§¤ì¼ ìŠ¤íƒ ë“œì—… ë¯¸íŒ…ì—ì„œ ì§„í–‰ ìƒí™©ì„ ê³µìœ í•˜ê³ , Blocker ë°œìƒ ì‹œ ì¦‰ì‹œ ì—ìŠ¤ì»¬ë ˆì´ì…˜í•©ë‹ˆë‹¤. ì´ ê³„íšì— ì´ê²¬ì´ ìˆëŠ” í˜ë¥´ì†Œë‚˜ëŠ” ì§€ê¸ˆ ë°œì–¸í•˜ì‹­ì‹œì˜¤. ì—†ìœ¼ë©´ ë§Œì¥ì¼ì¹˜ë¡œ ìŠ¹ì¸ë©ë‹ˆë‹¤."

### ğŸ›ï¸ Architect (ì„¤ê³„ì)
> "PMì˜ ê³„íšì— ì „ì ìœ¼ë¡œ ë™ì˜í•©ë‹ˆë‹¤. ë‹¨, í•œ ê°€ì§€ ì¶”ê°€ ê¶Œì¥ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. Sprint 1ì—ì„œ Redis Persistence ì„¤ì •ì„ ë³€ê²½í•  ë•Œ, ë°˜ë“œì‹œ 'Persistence Test'ë¥¼ í•¨ê»˜ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì´ê²ƒì€ Redisë¥¼ ê°•ì œë¡œ ì¬ì‹œì‘í•œ í›„, ì¬ì‹œì‘ ì „ì— ì €ì¥í•œ ë°ì´í„°ê°€ ë³µêµ¬ë˜ëŠ”ì§€ ê²€ì¦í•˜ëŠ” í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤. `tests/test_redis_persistence.py`ë¥¼ ì¶”ê°€í•˜ì—¬, Redisì— 100ê°œ ë©”ì‹œì§€ë¥¼ ë°œí–‰í•˜ê³ , `docker restart stock-redis` ëª…ë ¹ì„ ì‹¤í–‰í•œ í›„, Redisì— ì—¬ì „íˆ 100ê°œ ë©”ì‹œì§€ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì´ê²ƒì€ Integration Testì´ë¯€ë¡œ CIì—ì„œ ì‹¤í–‰ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë˜í•œ Developerê°€ êµ¬í˜„í•  'Flush Retry + Fallback' ë¡œì§ì€ ë°˜ë“œì‹œ Pydantic Schemaì™€ í˜¸í™˜ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì¦‰, `data/failed_batches/batch_TIMESTAMP.json`ì— ì €ì¥í•  ë•Œ, ë‹¨ìˆœ dictê°€ ì•„ë‹ˆë¼ `MarketData.model_dump_json()`ìœ¼ë¡œ ì§ë ¬í™”í•´ì•¼ ë‚˜ì¤‘ì— ì¬ì²˜ë¦¬í•  ë•Œ Schema ê²€ì¦ì„ í†µê³¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ ì„¤ê³„ ì›ì¹™ì…ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, P2ë¡œ ë¯¸ë£¬ God Object ë¦¬íŒ©í† ë§ì€ ê¸°ìˆ  ë¶€ì±„ë¡œ ëª…ì‹œì ìœ¼ë¡œ ê¸°ë¡í•´ì•¼ í•©ë‹ˆë‹¤. `docs/governance/deferred_work.md`ì— 'DEFER-001: WebSocket Manager Refactoring'ìœ¼ë¡œ ë“±ë¡í•˜ê³ , ì˜ˆìƒ ì‘ì—…ëŸ‰(3ì¼), ë¦¬ìŠ¤í¬(í…ŒìŠ¤íŠ¸ ë¶ˆê°€ëŠ¥ì„±), ìš°ì„ ìˆœìœ„(P2)ë¥¼ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤. ì´ê²ƒì€ Doc Specialistì˜ ì‘ì—…ì…ë‹ˆë‹¤. ì´ ì„¸ ê°€ì§€ ì¡°ê±´ì´ ì¶©ì¡±ë˜ë©´ ìŠ¹ì¸í•©ë‹ˆë‹¤."

### ğŸ”¬ Data Scientist (ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸)
> "PMì˜ ê³„íšê³¼ Architectì˜ ì¶”ê°€ ê¶Œì¥ì‚¬í•­ì— ëª¨ë‘ ë™ì˜í•©ë‹ˆë‹¤. ì œê°€ ë‹´ë‹¹í•  'E2E Observability Test'ì˜ êµ¬ì²´ì ì¸ ì„¤ê³„ë¥¼ ê³µìœ í•˜ê² ìŠµë‹ˆë‹¤. ì´ í…ŒìŠ¤íŠ¸ëŠ” ì„¸ ë‹¨ê³„ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì²«ì§¸, Collector ì‹œë®¬ë ˆì´ì…˜ì…ë‹ˆë‹¤. `ticker.kr` ì±„ë„ì— 100ê°œì˜ Mock ë©”ì‹œì§€ë¥¼ 1ì´ˆ ê°„ê²©ìœ¼ë¡œ ë°œí–‰í•˜ê³ , ê° ë©”ì‹œì§€ë§ˆë‹¤ Redis `INCR published:count`ë¡œ ì¹´ìš´í„°ë¥¼ ì¦ê°€ì‹œí‚µë‹ˆë‹¤. ë‘˜ì§¸, Archiver Verificationì…ë‹ˆë‹¤. 120ì´ˆ ëŒ€ê¸° í›„(FLUSH_INTERVAL * 2 + ë²„í¼), DBì—ì„œ `SELECT COUNT(*) FROM market_ticks WHERE symbol LIKE 'E2E_OBS_%'`ë¡œ ì €ì¥ëœ ê±´ìˆ˜ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. ì…‹ì§¸, Delta Assertionì…ë‹ˆë‹¤. `published:count`ì™€ DB countì˜ ì°¨ì´ê°€ 5ê°œ ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤(5% í—ˆìš© ì˜¤ì°¨). ë§Œì•½ ì°¨ì´ê°€ 5ê°œ ì´ˆê³¼ë©´, í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨í•˜ê³  ìƒì„¸ ë¡œê·¸(ì–´ë–¤ ì‹¬ë³¼ì´ ëˆ„ë½ë˜ì—ˆëŠ”ì§€)ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤. ì´ í…ŒìŠ¤íŠ¸ëŠ” `tests/e2e/test_observability_metrics.py`ë¡œ ì‘ì„±í•˜ê³ , pytestì˜ `@pytest.mark.slow` ë§ˆì»¤ë¥¼ ë¶™ì—¬ì„œ Nightly Buildì—ì„œë§Œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤. ë˜í•œ Infraê°€ ìˆ˜ì •í•  Redis Persistence ì„¤ì •ì— ëŒ€í•´, ì œ ê¶Œì¥ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. `appendonly yes` + `appendfsync no` + `save 60 1000`ì˜ í•˜ì´ë¸Œë¦¬ë“œ ëª¨ë“œë¥¼ ì‚¬ìš©í•˜ë˜, ë°˜ë“œì‹œ `no-appendfsync-on-rewrite yes`ë¡œ ì„¤ì •í•˜ì—¬ Rewrite ì¤‘ì—ëŠ” fsyncë¥¼ Skipí•´ì•¼ í•©ë‹ˆë‹¤. ì´ê²ƒì€ Zero Cost í™˜ê²½ì˜ ëŠë¦° Disk I/Oì—ì„œë„ ì„±ëŠ¥ì„ ìœ ì§€í•˜ë©´ì„œ ë°ì´í„° ë³´í˜¸ë¥¼ ë‹¬ì„±í•˜ëŠ” ìµœì  ì„¤ì •ì…ë‹ˆë‹¤. ì´ ì„¤ì •ì€ `managed_policies.md`ì— ë¬¸ì„œí™”ë˜ì–´ì•¼ í•©ë‹ˆë‹¤."

### ğŸ”§ Infrastructure Engineer (ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´)
> "PMì˜ ê³„íšê³¼ Data Scientistì˜ Redis ì„¤ì • ê¶Œì¥ì‚¬í•­ì— ë™ì˜í•©ë‹ˆë‹¤. Sprint 1ì—ì„œ ì œê°€ ë‹´ë‹¹í•  ì‘ì—…ì˜ êµ¬ì²´ì ì¸ ì‹¤í–‰ ê³„íšì„ ê³µìœ í•˜ê² ìŠµë‹ˆë‹¤. ì²«ì§¸, CI/CD íŒŒì´í”„ë¼ì¸ì€ `.github/workflows/test.yml`ì„ ì¶”ê°€í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±í•©ë‹ˆë‹¤: PR ìƒì„± ì‹œ ìë™ìœ¼ë¡œ `docker-compose -f deploy/docker-compose.test.yml up -d` ì‹¤í–‰, `pytest tests/ --cov=src --cov-fail-under=75` ì‹¤í–‰(ì´ˆê¸° ëª©í‘œ 75%, ì ì§„ì ìœ¼ë¡œ 80%ë¡œ ìƒí–¥), Coverage Reportë¥¼ GitHub Actions Artifactë¡œ ì—…ë¡œë“œ, í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œ PR Merge Block. ë‘˜ì§¸, Redis Persistence ì„¤ì •ì€ `deploy/docker-compose.yml`ì˜ Redis ì„œë¹„ìŠ¤ì— `command: redis-server --appendonly yes --appendfsync no --save 60 1000 --no-appendfsync-on-rewrite yes`ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  Architectê°€ ìš”êµ¬í•œ Persistence Testë¥¼ `tests/integration/test_redis_durability.py`ë¡œ ì‘ì„±í•©ë‹ˆë‹¤. ì…‹ì§¸, Graceful Shutdownì€ `timescale_archiver.py`ì™€ `unified_collector.py` ì–‘ìª½ì— ëª¨ë‘ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤. `signal.SIGTERM` Handlerë¥¼ ì¶”ê°€í•˜ê³ , `shutdown_event = asyncio.Event()`ë¥¼ ì‚¬ìš©í•˜ì—¬ Loopì„ ì¢…ë£Œí•œ í›„, `await db_pool.close()` ë° `await redis.close()`ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ê²ƒì€ `tests/integration/test_graceful_shutdown.py`ë¡œ ê²€ì¦í•˜ë˜, Docker Composeë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ ì»¨í…Œì´ë„ˆë¥¼ stopí•œ í›„ ë¡œê·¸ë¥¼ íŒŒì‹±í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤. ë„·ì§¸, ëª¨ë“  ì„¤ì • ë³€ê²½ì€ `managed_policies.md`ì™€ `deployment_strategy.md`ì— ì¦‰ì‹œ ë°˜ì˜í•©ë‹ˆë‹¤. ë‹¤ì„¯ì§¸, CI êµ¬ì¶• ì™„ë£Œ í›„ QAì—ê²Œ Reviewë¥¼ ìš”ì²­í•˜ê³ , QA ìŠ¹ì¸ ì—†ì´ëŠ” ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ ê³„íšëŒ€ë¡œ ì‹¤í–‰í•˜ë©´ 1ì£¼ ë‚´ì— Sprint 1ì„ ì™„ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."

### ğŸ‘¨â€ğŸ’» Developer (ê°œë°œì)
> "PMì˜ ê³„íšê³¼ Infraì˜ ì‹¤í–‰ ê³„íšì— ë™ì˜í•©ë‹ˆë‹¤. ì œê°€ ë‹´ë‹¹í•  'Archiver Flush Retry + Fallback' ë¡œì§ì˜ êµ¬í˜„ ìƒì„¸ë¥¼ ê³µìœ í•˜ê² ìŠµë‹ˆë‹¤. ì²«ì§¸, `timescale_archiver.py`ì˜ `flush()` ë©”ì„œë“œë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•©ë‹ˆë‹¤: DB Insert ì‹¤íŒ¨ ì‹œ Exponential Backoff(1ì´ˆ, 2ì´ˆ, 4ì´ˆ)ë¡œ 3íšŒ ì¬ì‹œë„, 3íšŒ ëª¨ë‘ ì‹¤íŒ¨í•˜ë©´ `data/failed_batches/` ë””ë ‰í† ë¦¬ì— `batch_{timestamp}_{uuid}.json` íŒŒì¼ë¡œ ì €ì¥, ì´ë•Œ Architectê°€ ìš”êµ¬í•œ ëŒ€ë¡œ `[data.model_dump() for data in self.batch]` í˜•ì‹ìœ¼ë¡œ ì§ë ¬í™”í•˜ì—¬ Schema í˜¸í™˜ì„± ë³´ì¥, Fallback ì„±ê³µ ì‹œ `system:alerts` ì±„ë„ì— Warning Level Alert ë°œì†¡. ë‘˜ì§¸, Recovery Workerë¥¼ ë³„ë„ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤. `src/data_ingestion/recovery/batch_recovery.py`ë¥¼ ì¶”ê°€í•˜ì—¬, 10ë¶„ë§ˆë‹¤ `data/failed_batches/` ë””ë ‰í† ë¦¬ë¥¼ ìŠ¤ìº”í•˜ê³ , íŒŒì¼ì´ ìˆìœ¼ë©´ DB Insertë¥¼ ì¬ì‹œë„í•˜ë©°, ì„±ê³µí•˜ë©´ íŒŒì¼ì„ ì‚­ì œí•˜ê³  `system:alerts`ì— Info Level Alert ë°œì†¡í•©ë‹ˆë‹¤. ì…‹ì§¸, ì´ ëª¨ë“  ë¡œì§ì€ `tests/integration/test_archiver_resilience.py`ë¡œ ê²€ì¦í•©ë‹ˆë‹¤. Mockìœ¼ë¡œ DB Connectionì„ ê°•ì œë¡œ ì‹¤íŒ¨ì‹œí‚¨ í›„, Fallback íŒŒì¼ì´ ìƒì„±ë˜ëŠ”ì§€, Recovery Workerê°€ ì´ê²ƒì„ ë³µêµ¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ë„·ì§¸, Graceful Shutdownì€ Infraê°€ ì œì‹œí•œ ë°©ì‹ëŒ€ë¡œ êµ¬í˜„í•˜ë˜, ì¶”ê°€ë¡œ `await self.flush()`ë¥¼ Shutdown Handlerì— í¬í•¨ì‹œì¼œì„œ, ì¢…ë£Œ ì‹œ ë‚¨ì€ Batchë¥¼ ê°•ì œë¡œ Flushí•˜ë„ë¡ í•©ë‹ˆë‹¤. ë‹¤ì„¯ì§¸, ëª¨ë“  ì½”ë“œì— í•œêµ­ì–´ Docstringì„ ì¶”ê°€í•˜ê³ , Error Handling ë¡œì§ì—ëŠ” ìƒì„¸í•œ ì£¼ì„ì„ ë‹¬ì•„ì„œ Doc Specialistê°€ ë¦¬ë·°í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ì´ êµ¬í˜„ì€ 3ì¼ ë‚´ì— ì™„ë£Œ ê°€ëŠ¥í•˜ë©°, Infraì˜ CI êµ¬ì¶•ì´ ì™„ë£Œë˜ëŠ” ëŒ€ë¡œ ì¦‰ì‹œ PRì„ ì˜¬ë¦¬ê² ìŠµë‹ˆë‹¤."

### ğŸ§ª QA Engineer (í…ŒìŠ¤íŠ¸/í’ˆì§ˆ ì—”ì§€ë‹ˆì–´)
> "PMì˜ ê³„íšê³¼ ëª¨ë“  í˜ë¥´ì†Œë‚˜ì˜ ì‹¤í–‰ ê³„íšì— ë™ì˜í•©ë‹ˆë‹¤. Sprint 2ì—ì„œ ì œê°€ ë‹´ë‹¹í•  'Manual Verification ìë™í™”'ì˜ êµ¬ì²´ì ì¸ ë²”ìœ„ë¥¼ ëª…í™•íˆ í•˜ê² ìŠµë‹ˆë‹¤. Test Registryì—ì„œ 'Manual' ë˜ëŠ” 'Logs Verified' ìƒíƒœì¸ í…ŒìŠ¤íŠ¸ëŠ” ì´ 11ê°œì…ë‹ˆë‹¤: DUAL-SOC-01, DUAL-ISO-01, SUB-CONF-01~03, CONN-READY-01, DOOM-PROT-01~02, SENTINEL-01~02ì…ë‹ˆë‹¤. ì´ ì¤‘ Sprint 2ì—ì„œ ìë™í™”í•  í…ŒìŠ¤íŠ¸ëŠ” ë‹¤ìŒ 5ê°œì…ë‹ˆë‹¤(ìš°ì„ ìˆœìœ„ ìˆœ): 1) SUB-CONF-01(êµ¬ë… í™•ì¸): `tests/integration/test_subscription_lifecycle.py`ë¡œ ìë™í™”, WebSocket Mock ì„œë²„ë¥¼ ë„ì›Œì„œ 'SUBSCRIBE SUCCESS' ì‘ë‹µì„ ì‹œë®¬ë ˆì´ì…˜, 2) CONN-READY-01(ì—°ê²° ì™„ë£Œ ëŒ€ê¸°): `connection_ready.wait()` Eventê°€ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸, 3) DOOM-PROT-01(Suicide Packet): Redisì— `{command: restart}` ë©”ì‹œì§€ë¥¼ ë°œí–‰í•˜ì—¬ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ëŠ”ì§€ Docker Test, 4) SENTINEL-01(Critical Alert): Sentinelì´ `system:alerts` ì±„ë„ì„ êµ¬ë…í•˜ëŠ”ì§€ Integration Test, 5) DUAL-SOC-01(ì†Œì¼“ ë¶„ë¦¬): Dual Modeì—ì„œ Tickê³¼ Orderbookì´ ë³„ë„ ì†Œì¼“ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ ë¡œê·¸ íŒŒì‹± í…ŒìŠ¤íŠ¸. ë‚˜ë¨¸ì§€ 6ê°œ(DUAL-ISO-01, SUB-RETRY-01, DOOM-PROT-02, SENTINEL-02, UI-EXT-01~03)ëŠ” Phase 2ë¡œ ì—°ê¸°í•©ë‹ˆë‹¤. ë˜í•œ ì œê°€ ìˆ˜í–‰í•  Review ê¸°ì¤€ì„ ëª…í™•íˆ í•˜ê² ìŠµë‹ˆë‹¤. Infraê°€ êµ¬ì¶•í•œ CIëŠ” ë‹¤ìŒ ì¡°ê±´ì„ ì¶©ì¡±í•´ì•¼ QA Passì…ë‹ˆë‹¤: 1) PR ìƒì„± ì‹œ 30ë¶„ ì´ë‚´ì— í…ŒìŠ¤íŠ¸ ì™„ë£Œ, 2) Coverage Reportê°€ HTML Artifactë¡œ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥, 3) í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œ ì–´ë–¤ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í–ˆëŠ”ì§€ ëª…í™•íˆ í‘œì‹œ, 4) Flaky Test(ê°€ë” ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸) ë°œìƒ ì‹œ ìë™ Retry(ìµœëŒ€ 1íšŒ). Developerê°€ êµ¬í˜„í•œ Archiver ResilienceëŠ” ë‹¤ìŒ ì¡°ê±´ì„ ì¶©ì¡±í•´ì•¼ QA Passì…ë‹ˆë‹¤: 1) DB ì¤‘ë‹¨ ì‹œ 100% Fallback ì„±ê³µ, 2) Recovery Workerê°€ 10ë¶„ ì´ë‚´ì— Fallback íŒŒì¼ ë³µêµ¬, 3) Data Loss 0ê±´ ë³´ì¥. ì´ ê¸°ì¤€ì„ ì¶©ì¡±í•˜ì§€ ëª»í•˜ë©´ ë°°í¬ ê±°ë¶€ê¶Œì„ í–‰ì‚¬í•˜ê² ìŠµë‹ˆë‹¤."

### ğŸ“ Doc Specialist (ë¬¸ì„œ ì „ë¬¸ê°€)
> "PMì˜ ê³„íšê³¼ ëª¨ë“  ì‹¤í–‰ ê³„íšì— ë™ì˜í•©ë‹ˆë‹¤. Sprint 1~2ì—ì„œ ì œê°€ ë‹´ë‹¹í•  ë¬¸ì„œí™” ì‘ì—…ì˜ êµ¬ì²´ì ì¸ ë²”ìœ„ë¥¼ ëª…í™•íˆ í•˜ê² ìŠµë‹ˆë‹¤. ì²«ì§¸, Decision Record ì‘ì„±ì…ë‹ˆë‹¤. í˜„ì¬ ëˆ„ë½ëœ Decision RecordëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤: `005_subscription_cleanup_fix.md`(2026-01-15 Emergency Fix), `006_redis_persistence_strategy.md`(Redis AOF + Snapshot í•˜ì´ë¸Œë¦¬ë“œ), `007_archiver_fallback_mechanism.md`(Flush Retry + Disk Fallback). ì´ ì„¸ ë¬¸ì„œëŠ” Sprint 1 ì¢…ë£Œ ì „ê¹Œì§€ ì‘ì„±í•˜ê³ , HISTORY.mdì— Indexë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ë‘˜ì§¸, Test Registry ê°œì„ ì…ë‹ˆë‹¤. 'Execution Method' ì»¬ëŸ¼ì„ ì¶”ê°€í•˜ì—¬ ê° í…ŒìŠ¤íŠ¸ì˜ ì‹¤í–‰ ë°©ì‹(GitHub Actions, Local Docker, pytest ëª…ë ¹ì–´)ì„ ëª…ì‹œí•˜ê³ , 'Artifact URL' ì»¬ëŸ¼ì„ ì¶”ê°€í•˜ì—¬ Coverage Report, Log File ë§í¬ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤. ë˜í•œ 'Last Verified' ì»¬ëŸ¼ì„ ì¶”ê°€í•˜ì—¬ ë§ˆì§€ë§‰ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë‚ ì§œë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤. ì…‹ì§¸, Managed Policies ì—…ë°ì´íŠ¸ì…ë‹ˆë‹¤. Data Scientistì™€ Infraê°€ í•©ì˜í•œ Redis ì„¤ì •ì„ `managed_policies.md`ì˜ 'Data & Resource Management' ì„¹ì…˜ì— ì¶”ê°€í•˜ê³ , BATCH_SIZE(100), FLUSH_INTERVAL(5ì´ˆ), RETRY_COUNT(3íšŒ) ê°™ì€ Magic Numberë¥¼ ëª¨ë‘ Policyë¡œ ë“±ë¡í•©ë‹ˆë‹¤. ë„·ì§¸, Deferred Work ë“±ë¡ì…ë‹ˆë‹¤. Architectê°€ ìš”êµ¬í•œ 'DEFER-001: WebSocket Manager Refactoring'ì„ `docs/governance/deferred_work.md`ì— ì¶”ê°€í•˜ê³ , ì˜ˆìƒ ì‘ì—…ëŸ‰(3ì¼), ê¸°ìˆ  ë¶€ì±„ ì´ìœ (God Object, ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë¶ˆê°€ëŠ¥), Activation ì¡°ê±´(Phase 2 ì‹œì‘ ì‹œ)ì„ ëª…ì‹œí•©ë‹ˆë‹¤. ë‹¤ì„¯ì§¸, Developerê°€ ì‘ì„±í•œ ëª¨ë“  ì½”ë“œì— Docstringì´ ìˆëŠ”ì§€ ë¦¬ë·°í•˜ê³ , ì—†ìœ¼ë©´ PRì— Commentë¥¼ ë‹¬ì•„ì„œ ìˆ˜ì •ì„ ìš”ì²­í•©ë‹ˆë‹¤. ì—¬ì„¯ì§¸, Sprint 2 ì¢…ë£Œ ì‹œ 'Test Completeness Review Report'ë¥¼ ìµœì¢… ë°œí–‰í•˜ì—¬ README.mdì™€ master_roadmap.mdì— ë§í¬ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì´ ëª¨ë“  ì‘ì—…ì€ SSoT ì›ì¹™ì„ ì¤€ìˆ˜í•˜ë©°, ë¬¸ì„œ ê°„ ë§í¬ë¥¼ ìƒí˜¸ ê²€ì¦í•˜ì—¬ Dead Linkê°€ ì—†ë„ë¡ í•©ë‹ˆë‹¤. ë§Œì¥ì¼ì¹˜ ìŠ¹ì¸ì„ ìš”ì²­í•©ë‹ˆë‹¤."

---

## 7. Action Plan Summary (ì‹¤í–‰ ê³„íš ìš”ì•½)

### ğŸ¯ Sprint 1 (1ì£¼ì°¨) - P0 ì‘ì—…

| ì‘ì—… | ë‹´ë‹¹ | ë¦¬ë·°ì–´ | ê²€ì¦ ê¸°ì¤€ | ì˜ˆìƒ ê³µìˆ˜ |
|------|------|--------|-----------|-----------|
| **CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•** | Infra | QA | PR ìƒì„± ì‹œ 30ë¶„ ë‚´ ìë™ í…ŒìŠ¤íŠ¸ | 2ì¼ |
| **Graceful Shutdown êµ¬í˜„** | Developer | Infra | `docker stop` ì‹œ Connection Leak 0ê±´ | 1ì¼ |
| **Archiver Flush Retry + Fallback** | Developer | Data Scientist | DB ì¤‘ë‹¨ ì‹œ Fallback ì„±ê³µë¥  100% | 2ì¼ |
| **Redis Persistence ì„¤ì • ê²€ì¦** | Infra | Architect | Redis ì¬ì‹œì‘ í›„ ë°ì´í„° ë³µêµ¬ 100% | 1ì¼ |
| **Decision Record ì‘ì„±** | Doc | ì „ì› | 005~007ë²ˆ Decision ë¬¸ì„œí™” | 1ì¼ |

**ì´ ê³µìˆ˜**: 7ì¼ (ë³‘ë ¬ ì‘ì—… ê³ ë ¤ ì‹œ 5ì¼ ì™„ë£Œ ê°€ëŠ¥)

### ğŸ¯ Sprint 2 (2ì£¼ì°¨) - P1 ì‘ì—…

| ì‘ì—… | ë‹´ë‹¹ | ë¦¬ë·°ì–´ | ê²€ì¦ ê¸°ì¤€ | ì˜ˆìƒ ê³µìˆ˜ |
|------|------|--------|-----------|-----------|
| **E2E Observability Test** | Data Scientist | QA | ë°œí–‰ vs ì €ì¥ Delta 5% ì´í•˜ | 2ì¼ |
| **Manual Verification ìë™í™”** | QA | Developer | 11ê°œ â†’ 6ê°œë¡œ ê°ì†Œ (5ê°œ ìë™í™”) | 3ì¼ |
| **Test Registry ê°œì„ ** | Doc | QA | Execution Method, Artifact URL ì¶”ê°€ | 1ì¼ |
| **Chaos Testing ì¸í”„ë¼** | Infra | QA | Docker Restart Test ìë™í™” | 2ì¼ |

**ì´ ê³µìˆ˜**: 8ì¼ (ë³‘ë ¬ ì‘ì—… ê³ ë ¤ ì‹œ 5ì¼ ì™„ë£Œ ê°€ëŠ¥)

### ğŸ“¦ Backlog (Phase 2) - P2 ì‘ì—…

| ì‘ì—… | ì˜ˆìƒ ê³µìˆ˜ | ìš°ì„ ìˆœìœ„ | ë¹„ê³  |
|------|-----------|----------|------|
| **God Object ë¦¬íŒ©í† ë§** | 3ì¼ | P2 | DEFER-001 ë“±ë¡ |
| **Redis List ë§ˆì´ê·¸ë ˆì´ì…˜** | 2ì¼ | P2 | ì•„í‚¤í…ì²˜ ë³€ê²½ |
| **ë‚˜ë¨¸ì§€ 6ê°œ Manual Test ìë™í™”** | 3ì¼ | P2 | DUAL-ISO-01 ë“± |

---

## 8. Risk Mitigation (ë¦¬ìŠ¤í¬ ì™„í™” ê³„íš)

### ğŸ”´ High Priority Risks

| ë¦¬ìŠ¤í¬ | ì™„í™” ê³„íš | ì±…ì„ì | ìƒíƒœ |
|--------|-----------|--------|------|
| **Data Loss in Production** | Sprint 1 - Flush Retry + Fallback | Developer | ì§„í–‰ ì˜ˆì • |
| **Silent Failure** | Sprint 1 - Alert ë°œì†¡ ë¡œì§ | Developer | ì§„í–‰ ì˜ˆì • |
| **Resource Leak** | Sprint 1 - Graceful Shutdown | Developer | ì§„í–‰ ì˜ˆì • |
| **Redis Persistence** | Sprint 1 - ì„¤ì • ê²€ì¦ ë° ìˆ˜ì • | Infra | ì§„í–‰ ì˜ˆì • |
| **CI/CD ë¶€ì¬** | Sprint 1 - GitHub Actions êµ¬ì¶• | Infra | ì§„í–‰ ì˜ˆì • |

---

## 9. Success Metrics (ì„±ê³µ ì§€í‘œ)

### ğŸ“ˆ Sprint ì¢…ë£Œ ì‹œ ëª©í‘œ ì§€í‘œ

| KPI | Sprint 1 ëª©í‘œ | Sprint 2 ëª©í‘œ | í˜„ì¬ | ê°œì„ ìœ¨ |
|-----|---------------|---------------|------|--------|
| **Automated Test Coverage** | 85% | 95% | 70% | +25% |
| **Manual Verification Count** | 11ê°œ | 6ê°œ | 11ê°œ | -45% |
| **CI Build Time** | < 30min | < 20min | N/A | N/A |
| **Data Loss Risk** | Low | Minimal | High | -67% |
| **Production Readiness** | ğŸŸ¡ Caution | ğŸŸ¢ Ready | ğŸ”´ Blocked | âœ… |

---

## 10. Approval & Sign-off (ìŠ¹ì¸)

### âœ… Council of Six - ë§Œì¥ì¼ì¹˜ ìŠ¹ì¸

ë³¸ ë¦¬í¬íŠ¸ëŠ” 6ì¸ì˜ í˜ë¥´ì†Œë‚˜ê°€ 3íšŒì— ê±¸ì¹œ êµì°¨ í† ë¡ ì„ í†µí•´ ì‘ì„±ë˜ì—ˆìœ¼ë©°, ë‹¤ìŒê³¼ ê°™ì´ ë§Œì¥ì¼ì¹˜ë¡œ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.

**ìŠ¹ì¸ ì¼ì‹œ**: 2026-01-19 18:45 KST
**ìŠ¹ì¸ ë°©ì‹**: ë§Œì¥ì¼ì¹˜ (6/6)
**ìœ íš¨ ê¸°ê°„**: Sprint 2 ì¢…ë£Œ ì‹œê¹Œì§€ (2026-02-02)

---

## 11. Next Actions (ë‹¤ìŒ ë‹¨ê³„)

### Immediate (ì¦‰ì‹œ)
1. âœ… ë³¸ ë¦¬í¬íŠ¸ë¥¼ `docs/governance/reviews/002_test_completeness_review_2026-01-19.md`ë¡œ ì €ì¥
2. â³ BACKLOG.mdì— Sprint 1~2 ì‘ì—… ISSUE ë“±ë¡
3. â³ `docs/governance/HISTORY.md`ì— Index ì¶”ê°€
4. â³ README.mdì™€ master_roadmap.mdì— ë³¸ ë¦¬í¬íŠ¸ ë§í¬ ì¶”ê°€

### Sprint 1 Kickoff (ë‚´ì¼)
1. ê° ë‹´ë‹¹ì ë¸Œëœì¹˜ ìƒì„± (`feature/ISSUE-XXX-xxx`)
2. Daily Standup ìŠ¤ì¼€ì¤„ ì„¤ì • (ë§¤ì¼ ì˜¤ì „ 10ì‹œ)
3. Infra: CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶• ì‹œì‘
4. Doc: Decision Record 005~007 ì‘ì„± ì‹œì‘

### Sprint 2 Kickoff (1ì£¼ í›„)
1. Sprint 1 Review íšŒì˜ ê°œìµœ
2. Sprint 2 ì‘ì—… ë¸Œëœì¹˜ ìƒì„±
3. Data Scientist: E2E Observability Test êµ¬í˜„ ì‹œì‘
4. QA: Manual Test ìë™í™” ì‹œì‘

---

## 12. ë¸Œë ˆì¸ìŠ¤í† ë° ë° ì¬í‰ê°€ ê²°ê³¼ (v1.1 ì¶”ê°€)

ë³¸ ë¦¬í¬íŠ¸ ë°œí–‰ í›„, ë°ì´í„° ì „ì´ ì§€ì ë³„ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ëˆ„ë½ì— ëŒ€í•œ ì‹¬í™” ì¬í‰ê°€ê°€ ìˆ˜í–‰ë˜ì—ˆìŠµë‹ˆë‹¤. ìƒì„¸ ë‚´ìš©ì€ ë‹¤ìŒ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤.

- **ì•„ì´ë””ì–´ ë¬¸ì„œ**: [ID-data-transition-test-gap.md](file:///home/ubuntu/workspace/stock_monitoring/docs/ideas/stock_monitoring/ID-data-transition-test-gap.md)
- **ì£¼ìš” ì—…ë°ì´íŠ¸**: 5ëŒ€ ì „ì´ ì§€ì  ì‹ë³„ ë° P0ê¸‰ Chaos/Edge Case ì‹œë‚˜ë¦¬ì˜¤ êµ¬ì²´í™”.

---

**ë¬¸ì„œ ì¢…ë£Œ**
**ê²€í†  ì™„ë£Œì¼ì‹œ**: 2026-01-19 18:45 KST
**ë‹¤ìŒ ê²€í†  ì˜ˆì •**: Sprint 2 ì¢…ë£Œ ì‹œ (2026-02-02)
**ë¬¸ì„œ ë²„ì „**: v1.0
**ê´€ë ¨ Decision**: 005, 006, 007 (ì‘ì„± ì˜ˆì •)
